{"remainingRequest":"D:\\vue3\\bf_admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue3\\bf_admin\\src\\views\\promotionZone\\agentSet.vue?vue&type=style&index=0&id=63f5a657&scoped=true&lang=css&","dependencies":[{"path":"D:\\vue3\\bf_admin\\src\\views\\promotionZone\\agentSet.vue","mtime":1600156109163},{"path":"D:\\vue3\\bf_admin\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue3\\bf_admin\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\vue3\\bf_admin\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\vue3\\bf_admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue3\\bf_admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKQGltcG9ydCAnLi4vLi4vYXNzZXRzL2Nzcy9wcm9tb3Rpb25ab25lLmNzcyc7Cg=="},{"version":3,"sources":["agentSet.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmJA","file":"agentSet.vue","sourceRoot":"src/views/promotionZone","sourcesContent":["<template>\r\n    <div class=\"agent_set\">\r\n        <h4 class=\"title\">推广素材</h4>\r\n\r\n        <el-row :gutter=\"6\" class=\"head\">\r\n            <el-form>\r\n                <el-form-item>\r\n                    <el-col :span=\"8\">\r\n                         <el-radio-group v-model=\"data.type\">\r\n                            <el-radio-button label=\"1\">全部</el-radio-button>\r\n                            <el-radio-button label=\"2\">本月</el-radio-button>\r\n                            <el-radio-button label=\"3\">近三月</el-radio-button>\r\n                            <el-radio-button label=\"4\">半年内</el-radio-button>\r\n                        </el-radio-group>\r\n                    </el-col>\r\n                </el-form-item>\r\n                <el-form-item>\r\n                    <el-col :span=\"5\">\r\n                        <el-select placeholder=\"请选择类型\" v-model=\"data.genre\">\r\n                            <el-option v-for=\"(value, key) in list.genre\" :label=\"value\" :value=\"key\" :key=\"key\">{{ value }}</el-option>\r\n                        </el-select>\r\n                    </el-col>\r\n                    <el-col :span=\"5\">\r\n                        <el-select placeholder=\"请选择标题\" v-model=\"data.name\">\r\n                            <el-option v-for=\"(v,index) in list.list\" :value=\"v\" :key=\"index\">{{ v }}</el-option>\r\n                        </el-select>\r\n                    </el-col>\r\n                    <el-col :span=\"5\">\r\n                        <el-select placeholder=\"请选择尺寸\" v-model=\"data.size\">\r\n                            <el-option v-for=\"(v,index) in list.size\" :value=\"v\" :key=\"index\">{{ v }}</el-option>\r\n                        </el-select>\r\n                    </el-col>\r\n                    <el-col :span=\"8\">\r\n                        <el-button round class=\"primary-button\" @click=\"generaAgentPopularizeData\">查询</el-button>\r\n                        <el-button round plain @click=\"reset\">重置</el-button>\r\n                    </el-col>\r\n                </el-form-item>\r\n            </el-form>\r\n        </el-row>\r\n\r\n        <el-row class=\"agent_set_box\" v-for=\"(value,key) in list.data\" :key=\"key\" v-loading=\"showLoading\">\r\n            <el-col :span=\"24\" v-for=\"(v,index) in list.data[key]\" :key=\"index\">\r\n                <div class=\"left\">\r\n                    <img :src=\"v.url\">\r\n                </div>\r\n                <div class=\"right\">\r\n                    <div>\r\n                        <p><span>所属平台：</span>{{ v.platform }}</p>\r\n                        <p><span>更新日期：</span>{{ v.datetime }}</p>\r\n                        <p><span>图片尺寸：</span>{{ v.size }}<span class=\"primary-color\" style=\"opacity: 1;margin-left:10px;cursor: pointer;\" @click=\"download(v)\"><i class=\"el-icon-download\"></i>下载</span></p>\r\n                        <el-button round class=\"primary-button\" @click=\"renderClick(v.url)\">生成图片</el-button>\r\n                    </div>\r\n                </div>\r\n            </el-col>\r\n        </el-row>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import html2canvas from \"html2canvas\";\r\n    import { generaAgentPopularizeApi } from '../../http/api'\r\n    export default {\r\n        data() {\r\n            return {\r\n                showLoading: false,\r\n                data: {\r\n                    type: '1',\r\n                    genre: \"\",\r\n                    name: \"\",\r\n                    size: \"\"\r\n                },\r\n                list:\"\",\r\n            }\r\n        },\r\n        methods: {\r\n            // 初始化\r\n            generaAgentPopularizeData () {\r\n                var _this = this;\r\n                _this.showLoading = true;\r\n                generaAgentPopularizeApi(_this.data).then(res => {\r\n                    _this.showLoading = false;\r\n                    _this.list = res.data.message;\r\n                    localStorage.setItem('agentLink', res.data.message.url)\r\n                }).catch(err => {\r\n                    _this.showLoading = false\r\n                })\r\n            },\r\n            // 重置\r\n            reset() {\r\n                this.data = {\r\n                    type: '1',\r\n                    genre: \"\",\r\n                    name: \"\",\r\n                    size: \"\"\r\n                };\r\n                this.generaAgentPopularizeData()\r\n            },\r\n            getUrlBase64(url) {\r\n                return new Promise(resolve => {\r\n                    let canvas = document.createElement('canvas')\r\n                    let ctx = canvas.getContext('2d')\r\n                    let img = new Image()\r\n                    img.crossOrigin = 'Anonymous' //允许跨域\r\n                    img.src = url\r\n                    img.onload = function() {\r\n                        canvas.height = 300\r\n                        canvas.width = 300\r\n                        ctx.drawImage(img, 0, 0, 300, 300)\r\n                        let dataURL = canvas.toDataURL('image/png')\r\n                        canvas = null\r\n                        resolve(dataURL)\r\n                    }\r\n                })\r\n            },\r\n            // 下载\r\n            download(v) {\r\n                let canvas = document.createElement('canvas')\r\n                let ctx = canvas.getContext('2d')\r\n                let img = new Image()\r\n                img.crossOrigin = 'Anonymous' //允许跨域\r\n                img.src = v.url\r\n                img.onload = function() {\r\n                    canvas.height = img.height;\r\n                    canvas.width = img.width;\r\n                    ctx.drawImage(img, 0, 0, img.width, img.height)\r\n                    let dataURL = canvas.toDataURL('image/png')\r\n\r\n                    let link = document.createElement('a')\r\n                    link.href = dataURL\r\n                    link.download = v.title\r\n                    link.click()\r\n                }\r\n            },\r\n            // 生成图片\r\n            renderClick(url) {\r\n                var imgUrl = url;\r\n                localStorage.setItem('selectedBgImg', imgUrl);\r\n                this.$router.push('/generatePicture')\r\n            }\r\n        },\r\n        mounted() {\r\n            this.generaAgentPopularizeData()\r\n        },\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    @import '../../assets/css/promotionZone.css';\r\n</style>"]}]}