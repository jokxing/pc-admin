{"remainingRequest":"G:\\bm_admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\bm_admin\\src\\views\\promotionZone\\agentImport.vue?vue&type=style&index=0&id=46c4da40&scoped=true&lang=css&","dependencies":[{"path":"G:\\bm_admin\\src\\views\\promotionZone\\agentImport.vue","mtime":1612605430000},{"path":"G:\\bm_admin\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\bm_admin\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"G:\\bm_admin\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"G:\\bm_admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\bm_admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgpAaW1wb3J0ICcuLi8uLi9hc3NldHMvY3NzL3Byb21vdGlvblpvbmUuY3NzJzsK"},{"version":3,"sources":["agentImport.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2PA","file":"agentImport.vue","sourceRoot":"src/views/promotionZone","sourcesContent":["<template>\r\n    <div class=\"agent_import\">\r\n        <el-tabs v-model=\"activeName\">\r\n            <el-tab-pane label=\"推广网址\" name=\"first\">\r\n                <el-row v-loading=\"showLoading\" style=\"min-height: 600px\">\r\n                    <el-col :span=\"24\" class=\"agent_import_list\" v-for=\"(item, index) in list\" :key=\"index\">\r\n                        <img :src=\"require('../../assets/img/' + item.img)\">\r\n                        <div class=\"right\">\r\n                            <span class=\"link\" :class=\"{ 'link_app': item.link.url.indexOf('.app') != -1 }\">\r\n                                {{ item.link.url }}\r\n                                <br>\r\n                                <em v-if=\"item.link.url.indexOf('.app') != -1\">注：1、下载跟注册时IP需保持一致，否则会注册到总线</em>\r\n                                <em v-if=\"item.link.url.indexOf('.app') != -1\"><i style=\"opacity: 0;\">注：</i>2、下载后未注册，一定时间后再注册会飞回总线</em>\r\n                                <em v-if=\"item.link.url.indexOf('.app') != -1\"><i style=\"opacity: 0;\">注：</i>3、如出现会员新注册不在名下可进行转线申请</em>\r\n                            </span>\r\n                            <el-dropdown trigger=\"click\" @command=\"handleAppdown\">\r\n                                <el-button plain round>下载<i class=\"el-icon-arrow-down el-icon--right\"></i></el-button>\r\n                                <el-dropdown-menu slot=\"dropdown\">\r\n                                    <el-dropdown-item :command=\"beforeHandleCommand(item.link.wx)\">防封二维码(微信)</el-dropdown-item>\r\n                                    <el-dropdown-item :command=\"beforeHandleCommand(item.link.qq)\">防封二维码(QQ)</el-dropdown-item>\r\n                                    <el-dropdown-item :command=\"beforeHandleCommand(item.link.url)\">长链接二维码</el-dropdown-item>\r\n                                </el-dropdown-menu>\r\n                            </el-dropdown>\r\n                            <el-dropdown trigger=\"click\" @command=\"handleCpye\">\r\n                                <el-button type=\"primary\" round>复制<i class=\"el-icon-arrow-down el-icon--right\"></i></el-button>\r\n                                <el-dropdown-menu slot=\"dropdown\">\r\n                                    <el-dropdown-item :command=\"beforeHandleCommand(item.link.wx, 'a')\">防封短链(微信)</el-dropdown-item>\r\n                                    <el-dropdown-item :command=\"beforeHandleCommand(item.link.qq, 'a')\">防封短链(QQ)</el-dropdown-item>\r\n                                    <el-dropdown-item :command=\"beforeHandleCommand(item.link.url, 'b')\">长链接</el-dropdown-item>\r\n                                </el-dropdown-menu>\r\n                            </el-dropdown>\r\n                        </div>\r\n                    </el-col>\r\n                </el-row>\r\n            </el-tab-pane>\r\n            <el-tab-pane label=\"专属域名\" name=\"second\">\r\n                <el-row v-loading=\"showLoading\">\r\n                    <el-col :span=\"24\" class=\"agent_import_list\" v-for=\"(item, index) in me\" :key=\"index\">\r\n                        <!-- <div class=\"me_box\">专属域名</div> -->\r\n                        <img src=\"../../assets/img/me1.png\" v-if=\"index == 0\">\r\n                        <img src=\"../../assets/img/me2.png\" v-if=\"index == 1\">\r\n                        <img src=\"../../assets/img/me1.png\" v-if=\"index == 2\">\r\n                        <img src=\"../../assets/img/me2.png\" v-if=\"index == 3\">\r\n                        <div class=\"right\">\r\n                            <span class=\"link\">{{ item }}</span>\r\n                            <el-button type=\"primary\" round @click=\"handleCpye(item, 'b')\">复制</el-button>\r\n                        </div>\r\n                    </el-col>\r\n                </el-row>\r\n            </el-tab-pane>\r\n        </el-tabs>\r\n\r\n        <!-- 隐藏复制方便获取连接 -->\r\n        <button ref=\"copys\" :data-clipboard-text=\"cpyeLink\" style=\"display: none;\">复制</button>    \r\n\r\n        <!-- 推广网址-二维码弹窗 -->\r\n        <el-dialog\r\n            title=\"下载二维码\"\r\n            :visible.sync=\"dialogVisible\"\r\n            :close-on-click-modal=false\r\n            width=\"670px\"\r\n            class=\"QRcode_popup\"\r\n            @closed=\"handleClose\">\r\n                <el-row>\r\n                    <div class=\"left\">\r\n                        <div id=\"downloadQrcode\">\r\n                            <div class=\"QRcode\" ref=\"appdownQrCodeDiv\"></div>\r\n                            <img src=\"../../assets/img/logo_img.png\" width=\"40\">\r\n                        </div>\r\n                        <el-button round plain class=\"btn_bor_primary\" @click=\"downloadLocal\">下载到本地</el-button>\r\n                    </div>\r\n                    <div class=\"right\">\r\n                        <div class=\"QRcode\" ref=\"linkQrCodeDiv\"></div>\r\n                        <p>扫一扫，手机查看</p>\r\n                    </div>\r\n                </el-row>\r\n        </el-dialog>\r\n\r\n        <!-- 推广网址-复制弹窗 -->\r\n        <el-dialog\r\n            title=\"复制成功\"\r\n            :visible.sync=\"dialogCpye\"\r\n            :close-on-click-modal=false\r\n            width=\"410px\">\r\n                <span>已帮您复制微信防封短链 {{ cpyeLink }}</span>\r\n                <span slot=\"footer\" class=\"dialog-footer\">\r\n                    <el-button plain round v-loading.fullscreen.lock=\"fullscreenLoading\" @click=\"regenerate\">重新生成</el-button>\r\n                    <el-button type=\"primary\" round @click=\"dialogCpye = false\">我知道了</el-button>\r\n                </span>\r\n        </el-dialog>\r\n\r\n        <!-- 推广网址-重新生成弹窗 -->\r\n        <el-dialog\r\n            title=\"温馨提示\"\r\n            :visible.sync=\"dialogRegenerate\"\r\n            :close-on-click-modal=false\r\n            width=\"410px\"\r\n            style=\"text-align: center;\">\r\n                <span style=\"line-height: 24px\">已帮您重新生成微信防封短链并复制: <br>{{ regenerateLink }}</span>\r\n                <span slot=\"footer\" class=\"dialog-footer\">\r\n                    <el-button type=\"primary\" round @click=\"dialogRegenerate = false\">我知道了</el-button>\r\n                </span>\r\n        </el-dialog>\r\n\r\n        <!-- 专属域名-复制弹窗 -->\r\n        <el-dialog\r\n            title=\"复制成功\"\r\n            :visible.sync=\"meDialogCpye\"\r\n            :close-on-click-modal=false\r\n            width=\"410px\">\r\n                <span>复制成功 {{ cpyeLink }}</span>\r\n                <span slot=\"footer\" class=\"dialog-footer\">\r\n                    <el-button type=\"primary\" round @click=\"meDialogCpye = false\">我知道了</el-button>\r\n                </span>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import QRCode from 'qrcodejs2';\r\n    import Clipboard from 'clipboard'; \r\n    import html2canvas from \"html2canvas\";\r\n    import { ganeraAgentImportApi, makeShortLinkApi } from '../../http/api'\r\n    export default {\r\n        data() {\r\n            return {\r\n                activeName: 'first',\r\n                list: [],\r\n                me: [],\r\n                showLoading: true,\r\n                fullscreenLoading: false,\r\n                dialogVisible: false,\r\n                dialogCpye: false,\r\n                dialogRegenerate: false,\r\n                cpyeLink: \"\",\r\n                regenerateLink: \"\",\r\n                meDialogCpye: false\r\n            }\r\n        },\r\n        methods: {\r\n            // 初始化\r\n            ganeraAgentImportData () {\r\n                var _this = this;\r\n                ganeraAgentImportApi().then(res => {\r\n                    _this.showLoading = false;\r\n                    _this.me = res.data.message.me.link;\r\n                    var res = res.data.message;\r\n                    Object.keys(res).forEach(function(j,k){\r\n                        for(var i = 0; i < res[j].length; i++){\r\n                            _this.list.push(res[j][i])\r\n                        }\r\n                    })\r\n                }).catch(err => {\r\n                    _this.showLoading = false\r\n                })\r\n            },\r\n            // 下载到本地\r\n            downloadLocal() {\r\n                var dragContainer = document.getElementById(\"downloadQrcode\");\r\n                let opts = {\r\n                    useCORS: true,\r\n                    scale: 1\r\n                };\r\n                html2canvas(dragContainer,opts).then((canvas) => {\r\n                    var url = canvas.toDataURL('image/png');    \r\n                    var a = document.createElement(\"a\");\r\n                    a.href = url;\r\n                    a.download = \"下载\";\r\n                    document.body.appendChild(a);\r\n                    a.click();\r\n                    document.body.removeChild(a);\r\n                });\r\n            },\r\n            //下拉传多个参数封装\r\n            beforeHandleCommand(item,row){\r\n                return {\r\n                    'command': item,\r\n                    'row': row\r\n                }\r\n            },\r\n            // 下载的下拉事件\r\n            handleAppdown(command) {\r\n                var _this = this;\r\n                this.dialogVisible = true;\r\n                setTimeout(function(){\r\n                    new QRCode(_this.$refs.appdownQrCodeDiv, {\r\n                        text: command.command,\r\n                        width: 190,\r\n                        height: 190,\r\n                        colorDark: \"#000\", //二维码颜色\r\n                        colorLight: \"#fff\", //二维码背景色\r\n                        correctLevel: QRCode.CorrectLevel.L//容错率，L/M/H\r\n                    })\r\n                    new QRCode(_this.$refs.linkQrCodeDiv, {\r\n                        text: command.command,\r\n                        width: 190,\r\n                        height: 190,\r\n                        colorDark: \"#000\", //二维码颜色\r\n                        colorLight: \"#fff\", //二维码背景色\r\n                        correctLevel: QRCode.CorrectLevel.L//容错率，L/M/H\r\n                    })\r\n                },300)\r\n            },\r\n            // 下载弹窗关闭\r\n            handleClose() {\r\n                this.$refs.appdownQrCodeDiv.innerHTML = '';\r\n                this.$refs.linkQrCodeDiv.innerHTML = '';\r\n            },\r\n            // 复制的下拉事件\r\n            handleCpye (command) {\r\n                if(command.command){\r\n                    this.cpyeLink = command.command;\r\n                }else{\r\n                    this.cpyeLink = command\r\n                }\r\n                new Clipboard(this.$refs.copys);\r\n                this.$nextTick(v => {\r\n                    this.$refs.copys.click()\r\n                })\r\n                if(command.row == 'a'){\r\n                    this.dialogCpye = true;\r\n                }else if(command.row == 'b'){\r\n                    this.$message.success('复制成功');\r\n                }else{\r\n                    this.meDialogCpye = true;\r\n                }\r\n            },\r\n            // 重新生成\r\n            regenerate () {\r\n                var _this = this;\r\n                this.dialogCpye = false;\r\n                this.fullscreenLoading = true;\r\n                var data = {\r\n                    url: this.cpyeLink\r\n                }\r\n                makeShortLinkApi(data).then(res => {\r\n                    _this.fullscreenLoading = false;\r\n                    _this.dialogRegenerate = true;\r\n                    _this.regenerateLink = res.data.message\r\n                }).catch(err => {\r\n                    _this.fullscreenLoading = false\r\n                })\r\n            }\r\n        },\r\n        mounted() {\r\n            this.ganeraAgentImportData();\r\n        },\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    @import '../../assets/css/promotionZone.css';\r\n</style>"]}]}