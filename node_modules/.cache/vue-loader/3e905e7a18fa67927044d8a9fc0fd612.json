{"remainingRequest":"G:\\bm_admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\bm_admin\\src\\views\\memberRecord\\memberBetDetails.vue?vue&type=style&index=0&id=4d4aa585&scoped=true&lang=css&","dependencies":[{"path":"G:\\bm_admin\\src\\views\\memberRecord\\memberBetDetails.vue","mtime":1618545586000},{"path":"G:\\bm_admin\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\bm_admin\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"G:\\bm_admin\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"G:\\bm_admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\bm_admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCkBpbXBvcnQgdXJsKC4uLy4uL2Fzc2V0cy9jc3MvbWVtYmVyUmVjb3JkLmNzcyk7Cg=="},{"version":3,"sources":["memberBetDetails.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuSA","file":"memberBetDetails.vue","sourceRoot":"src/views/memberRecord","sourcesContent":["<template>\r\n    <div class=\"memberBetDetails\">\r\n        <el-page-header @back=\"back\" content=\"会员投注详情\"></el-page-header>\r\n\r\n        <!-- 表格 -->\r\n        <el-row\r\n            <el-table\r\n                v-if=\"game.indexOf('体育') != -1\"\r\n                :data=\"tableData\"\r\n                v-loading=\"tableLoading\"\r\n                style=\"width: 100%\">\r\n                <el-table-column\r\n                    prop=\"\"\r\n                    label=\"下注时间 派彩时间\"\r\n                    width=\"86\">\r\n                        <template slot-scope=\"scope\">\r\n                            <p>{{ scope.row.time }}</p>\r\n                            <p class=\"red\">{{ scope.row.beat_content.check.settleTime }}</p>\r\n                        </template>\r\n                </el-table-column>\r\n                <el-table-column\r\n                    prop=\"\"\r\n                    label=\"单号/备注\"\r\n                    width=\"150\">\r\n                        <template slot-scope=\"scope\">\r\n                            <p>{{ scope.row.beat_content.check.content }}</p>\r\n                            <p>{{ scope.row.fundsn }}</p>\r\n                            <p>{{ scope.row.beat_content.check.ipAddress }}</p>\r\n                            <p v-if=\"isCountry\">\r\n                                <span v-if=\"scope.row.country\">{{ scope.row.country }} {{ scope.row.regionName }} {{ scope.row.city }} </span>\r\n                                <span class=\"grey\" v-if=\"scope.row.isp\">{{ scope.row.isp }}</span>\r\n                            </p>\r\n                            <p v-else>\r\n                                <i class=\"el-icon-loading\" v-if=\"scope.row.beat_content.check.ipAddress\"></i>\r\n                            </p>\r\n                            <p>{{ scope.row.beat_content.check.channel }}</p>\r\n                        </template>\r\n                </el-table-column>\r\n                <el-table-column\r\n                    prop=\"beat_content.check.startTime\"\r\n                    label=\"比赛时间\"\r\n                    width=\"86\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                    prop=\"\"\r\n                    label=\"玩法\"\r\n                    width=\"80\">\r\n                        <template slot-scope=\"scope\">\r\n                            <p v-if=\"scope.row.beat_content.check.group\">{{ scope.row.beat_content.check.group }}</p>\r\n                            <p class=\"red\" v-if=\"scope.row.beat_content.check.period && scope.row.beat_content.check.betType\">{{ scope.row.beat_content.check.period }} - {{ scope.row.beat_content.check.betType }}</p>\r\n                            <p class=\"red\" v-if=\"scope.row.beat_content.check.TeamScore\">{{ scope.row.beat_content.check.TeamScore }}</p>\r\n                            <p class=\"red\" v-if=\"scope.row.beat_content.check._TeamScore\">{{ scope.row.beat_content.check._TeamScore }}</p>\r\n                        </template>\r\n                </el-table-column>\r\n                <el-table-column\r\n                    prop=\"\"\r\n                    label=\"下注内容\">\r\n                        <template slot-scope=\"scope\">\r\n                            <p v-for=\"(item,index) in scope.row.beat_content.show.split('|')\" :key=\"index\" style=\"text-align:left\">{{ item }}</p>\r\n                        </template>\r\n                </el-table-column>\r\n                <el-table-column\r\n                    prop=\"beat_money\"\r\n                    label=\"投注金额\"\r\n                    width=\"54\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                    prop=\"\"\r\n                    label=\"会员\">\r\n                        <el-table-column\r\n                            prop=\"back_flow_money\"\r\n                            label=\"返水\"\r\n                            width=\"54\">\r\n                        </el-table-column>\r\n                        <el-table-column\r\n                            label=\"结果\"\r\n                            width=\"54\">\r\n                                <template slot-scope=\"scope\">\r\n                                    <div :class=\"{ 'red': scope.row.payout < 0, 'green': scope.row.payout > 0 }\">\r\n                                        {{ scope.row.payout }}\r\n                                    </div>\r\n                                </template>\r\n                        </el-table-column>\r\n                </el-table-column>\r\n                <el-table-column\r\n                    prop=\"valid_betamt\"\r\n                    label=\"有效投注\"\r\n                    width=\"54\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                    prop=\"\"\r\n                    label=\"状态\"\r\n                    width=\"58\">\r\n                        <template>\r\n                            <div class=\"green\">\r\n                                已派彩\r\n                            </div>\r\n                        </template>\r\n                </el-table-column>\r\n            </el-table>\r\n\r\n            <el-table\r\n                v-else\r\n                :data=\"tableData\"\r\n                v-loading=\"tableLoading\"\r\n                style=\"width: 100%\">\r\n                <el-table-column\r\n                    prop=\"time\"\r\n                    label=\"时间\"\r\n                    width=\"90\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                    prop=\"\"\r\n                    label=\"单号/备注\"\r\n                    width=\"220\">\r\n                        <template slot-scope=\"scope\">\r\n                            <p>{{ scope.row.beat_content.check.content }}</p>\r\n                            <p>{{ scope.row.fundsn }}</p>\r\n                            <p>{{ scope.row.beat_content.check.ipAddress }}</p>\r\n                            <p v-if=\"isCountry\">\r\n                                <span v-if=\"scope.row.country\">{{ scope.row.country }} {{ scope.row.regionName }} {{ scope.row.city }} </span>\r\n                                <span class=\"grey\" v-if=\"scope.row.isp\">{{ scope.row.isp }}</span>\r\n                            </p>\r\n                            <p v-else>\r\n                                <i class=\"el-icon-loading\" v-if=\"scope.row.beat_content.check.ipAddress\"></i>\r\n                            </p>\r\n                            <p>{{ scope.row.beat_content.check.channel }}</p>\r\n                        </template>\r\n                </el-table-column>\r\n                <el-table-column\r\n                    prop=\"\"\r\n                    label=\"下注内容\">\r\n                        <template slot-scope=\"scope\">\r\n                            <p v-for=\"(item,index) in scope.row.beat_content.show.split('|')\" :key=\"index\" style=\"text-align:left\">{{ item }}</p>\r\n                        </template>\r\n                </el-table-column>\r\n                <el-table-column\r\n                    prop=\"beat_money\"\r\n                    label=\"投注金额\"\r\n                    width=\"90\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                    prop=\"\"\r\n                    label=\"会员\">\r\n                        <el-table-column\r\n                            prop=\"back_flow_money\"\r\n                            label=\"返水\"\r\n                            width=\"54\">\r\n                        </el-table-column>\r\n                        <el-table-column\r\n                            label=\"结果\"\r\n                            width=\"54\">\r\n                                <template slot-scope=\"scope\">\r\n                                    <div :class=\"{ 'red': scope.row.payout < 0, 'green': scope.row.payout > 0 }\">\r\n                                        {{ scope.row.payout }}\r\n                                    </div>\r\n                                </template>\r\n                        </el-table-column>\r\n                </el-table-column>\r\n                <el-table-column\r\n                    prop=\"valid_betamt\"\r\n                    label=\"有效投注\"\r\n                    width=\"90\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                    prop=\"\"\r\n                    label=\"状态\"\r\n                    width=\"70\">\r\n                        <template>\r\n                            <div class=\"green\">\r\n                                已派彩\r\n                            </div>\r\n                        </template>\r\n                </el-table-column>\r\n            </el-table>\r\n        </el-row>\r\n\r\n        <!-- 分页 -->\r\n        <el-pagination\r\n            background\r\n            layout=\"prev, pager, next\"\r\n            @current-change=\"handleCurrentChange\"\r\n            :current-page.sync=\"page\" \r\n            :total=\"total\"\r\n            :page-size=\"pagesize\"\r\n            :hide-on-single-page=\"true\">\r\n        </el-pagination>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import { GameReportDetailApi } from '../../http/api.js'\r\n    export default {\r\n        data() {\r\n            return {\r\n                isCountry: false,\r\n                tableLoading: true,\r\n                tableData: [],\r\n                page: 1,\r\n                pagesize: 0,\r\n                total: 0,\r\n                Sort: \"\",\r\n                SortType: \"\",\r\n                game: ''\r\n            }\r\n        },   \r\n        methods: {\r\n            // 初始化\r\n            GameReportDetailData() {\r\n                var _this = this;\r\n                this.tableLoading = true;\r\n                var gameArr = this.$cookies.get('gameArr');\r\n                this.game = gameArr.game;\r\n                var data = {\r\n                    Plat: gameArr.Plat,\r\n                    Start: gameArr.Start,\r\n                    End: gameArr.End,\r\n                    Name: gameArr.Name,\r\n                    Page: this.page,\r\n                    Sort: this.Sort,\r\n                    SortType: this.SortType,\r\n                    version: 2\r\n                }\r\n\r\n                GameReportDetailApi(data).then(res => {\r\n                    _this.tableLoading = false;\r\n                    _this.tableData = res.data.message.lists;\r\n                    var result = [];\r\n                    var dataNum = 0;\r\n                    _this.tableData.forEach(async (person,index) => {\r\n                        if(person.beat_content.check.ipAddress){\r\n                            dataNum++\r\n                            var ipUrl = '//apidata.chinaz.com/CallAPI/ip?key=9d8158ef2f0f43869f90e76213abc630&ip=' + person.beat_content.check.ipAddress\r\n                            const num = await _this.getIpApi(ipUrl);\r\n                            console.log(num.data.Result.Country)\r\n                            _this.tableData[index]['country'] = num.data.Result.Country;\r\n                            _this.tableData[index]['regionName'] = num.data.Result.Province;\r\n                            _this.tableData[index]['city'] = num.data.Result.City;\r\n                            _this.tableData[index]['isp'] = num.data.Result.Isp;\r\n\r\n                            // 方便判断长度取消定时器\r\n                            var vote = {};\r\n                            vote.isp = num.data.isp;\r\n                            result.push(vote)\r\n                        }\r\n                    })\r\n                    var set = setInterval(function(){\r\n                        if(result.length == dataNum){\r\n                            _this.isCountry = true;\r\n                            clearInterval(set)\r\n                        }\r\n                    },1000)\r\n                    _this.total = res.data.message.total;\r\n                    _this.pagesize = res.data.message.PageSize\r\n                }).catch(err => {\r\n                    _this.tableLoading = false;\r\n                })\r\n            },\r\n            getIpApi (url) {\r\n                return this.$http.get(url).then()\r\n            },\r\n            // 排序\r\n            sortChange (column, prop, order) {\r\n                this.Sort = column.prop;\r\n                if(column.order == \"ascending\"){\r\n                    this.SortType = \"Asc\"\r\n                }else{\r\n                    this.SortType = \"Desc\"\r\n                }\r\n                this.GameReportDetailData()\r\n            },\r\n            // 返回\r\n            back () {\r\n                this.$router.push({\r\n                    name: 'gameRecord',\r\n                    params: this.$cookies.get('gameArr')\r\n                });\r\n                this.$cookies.remove('gameArr')\r\n            },\r\n            // 分页\r\n            handleCurrentChange(val) {\r\n                this.page = val;\r\n                this.GameReportDetailData()\r\n            }\r\n        },\r\n        // mounted() {\r\n        //     this.GameReportDetailData()\r\n        // },\r\n        created () {\r\n            this.GameReportDetailData()\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    @import url(../../assets/css/memberRecord.css);\r\n</style>"]}]}