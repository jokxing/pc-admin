{"remainingRequest":"D:\\vue3\\bm_admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue3\\bm_admin\\src\\views\\promotionZone\\agentSet.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue3\\bm_admin\\src\\views\\promotionZone\\agentSet.vue","mtime":1600156109163},{"path":"D:\\vue3\\bm_admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue3\\bm_admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\vue3\\bm_admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue3\\bm_admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBodG1sMmNhbnZhcyBmcm9tICJodG1sMmNhbnZhcyI7CmltcG9ydCB7IGdlbmVyYUFnZW50UG9wdWxhcml6ZUFwaSB9IGZyb20gJy4uLy4uL2h0dHAvYXBpJwpleHBvcnQgZGVmYXVsdCB7CiAgICBkYXRhKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHNob3dMb2FkaW5nOiBmYWxzZSwKICAgICAgICAgICAgZGF0YTogewogICAgICAgICAgICAgICAgdHlwZTogJzEnLAogICAgICAgICAgICAgICAgZ2VucmU6ICIiLAogICAgICAgICAgICAgICAgbmFtZTogIiIsCiAgICAgICAgICAgICAgICBzaXplOiAiIgogICAgICAgICAgICB9LAogICAgICAgICAgICBsaXN0OiIiLAogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgLy8g5Yid5aeL5YyWCiAgICAgICAgZ2VuZXJhQWdlbnRQb3B1bGFyaXplRGF0YSAoKSB7CiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgICAgICAgIF90aGlzLnNob3dMb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgZ2VuZXJhQWdlbnRQb3B1bGFyaXplQXBpKF90aGlzLmRhdGEpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgIF90aGlzLnNob3dMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICBfdGhpcy5saXN0ID0gcmVzLmRhdGEubWVzc2FnZTsKICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdhZ2VudExpbmsnLCByZXMuZGF0YS5tZXNzYWdlLnVybCkKICAgICAgICAgICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICAgICAgICAgIF90aGlzLnNob3dMb2FkaW5nID0gZmFsc2UKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIC8vIOmHjee9rgogICAgICAgIHJlc2V0KCkgewogICAgICAgICAgICB0aGlzLmRhdGEgPSB7CiAgICAgICAgICAgICAgICB0eXBlOiAnMScsCiAgICAgICAgICAgICAgICBnZW5yZTogIiIsCiAgICAgICAgICAgICAgICBuYW1lOiAiIiwKICAgICAgICAgICAgICAgIHNpemU6ICIiCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHRoaXMuZ2VuZXJhQWdlbnRQb3B1bGFyaXplRGF0YSgpCiAgICAgICAgfSwKICAgICAgICBnZXRVcmxCYXNlNjQodXJsKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHsKICAgICAgICAgICAgICAgIGxldCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKQogICAgICAgICAgICAgICAgbGV0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpCiAgICAgICAgICAgICAgICBsZXQgaW1nID0gbmV3IEltYWdlKCkKICAgICAgICAgICAgICAgIGltZy5jcm9zc09yaWdpbiA9ICdBbm9ueW1vdXMnIC8v5YWB6K646Leo5Z+fCiAgICAgICAgICAgICAgICBpbWcuc3JjID0gdXJsCiAgICAgICAgICAgICAgICBpbWcub25sb2FkID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgY2FudmFzLmhlaWdodCA9IDMwMAogICAgICAgICAgICAgICAgICAgIGNhbnZhcy53aWR0aCA9IDMwMAogICAgICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoaW1nLCAwLCAwLCAzMDAsIDMwMCkKICAgICAgICAgICAgICAgICAgICBsZXQgZGF0YVVSTCA9IGNhbnZhcy50b0RhdGFVUkwoJ2ltYWdlL3BuZycpCiAgICAgICAgICAgICAgICAgICAgY2FudmFzID0gbnVsbAogICAgICAgICAgICAgICAgICAgIHJlc29sdmUoZGF0YVVSTCkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIC8vIOS4i+i9vQogICAgICAgIGRvd25sb2FkKHYpIHsKICAgICAgICAgICAgbGV0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpCiAgICAgICAgICAgIGxldCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKQogICAgICAgICAgICBsZXQgaW1nID0gbmV3IEltYWdlKCkKICAgICAgICAgICAgaW1nLmNyb3NzT3JpZ2luID0gJ0Fub255bW91cycgLy/lhYHorrjot6jln58KICAgICAgICAgICAgaW1nLnNyYyA9IHYudXJsCiAgICAgICAgICAgIGltZy5vbmxvYWQgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIGNhbnZhcy5oZWlnaHQgPSBpbWcuaGVpZ2h0OwogICAgICAgICAgICAgICAgY2FudmFzLndpZHRoID0gaW1nLndpZHRoOwogICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShpbWcsIDAsIDAsIGltZy53aWR0aCwgaW1nLmhlaWdodCkKICAgICAgICAgICAgICAgIGxldCBkYXRhVVJMID0gY2FudmFzLnRvRGF0YVVSTCgnaW1hZ2UvcG5nJykKCiAgICAgICAgICAgICAgICBsZXQgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKQogICAgICAgICAgICAgICAgbGluay5ocmVmID0gZGF0YVVSTAogICAgICAgICAgICAgICAgbGluay5kb3dubG9hZCA9IHYudGl0bGUKICAgICAgICAgICAgICAgIGxpbmsuY2xpY2soKQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICAvLyDnlJ/miJDlm77niYcKICAgICAgICByZW5kZXJDbGljayh1cmwpIHsKICAgICAgICAgICAgdmFyIGltZ1VybCA9IHVybDsKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3NlbGVjdGVkQmdJbWcnLCBpbWdVcmwpOwogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2dlbmVyYXRlUGljdHVyZScpCiAgICAgICAgfQogICAgfSwKICAgIG1vdW50ZWQoKSB7CiAgICAgICAgdGhpcy5nZW5lcmFBZ2VudFBvcHVsYXJpemVEYXRhKCkKICAgIH0sCn0K"},{"version":3,"sources":["agentSet.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"agentSet.vue","sourceRoot":"src/views/promotionZone","sourcesContent":["<template>\r\n    <div class=\"agent_set\">\r\n        <h4 class=\"title\">推广素材</h4>\r\n\r\n        <el-row :gutter=\"6\" class=\"head\">\r\n            <el-form>\r\n                <el-form-item>\r\n                    <el-col :span=\"8\">\r\n                         <el-radio-group v-model=\"data.type\">\r\n                            <el-radio-button label=\"1\">全部</el-radio-button>\r\n                            <el-radio-button label=\"2\">本月</el-radio-button>\r\n                            <el-radio-button label=\"3\">近三月</el-radio-button>\r\n                            <el-radio-button label=\"4\">半年内</el-radio-button>\r\n                        </el-radio-group>\r\n                    </el-col>\r\n                </el-form-item>\r\n                <el-form-item>\r\n                    <el-col :span=\"5\">\r\n                        <el-select placeholder=\"请选择类型\" v-model=\"data.genre\">\r\n                            <el-option v-for=\"(value, key) in list.genre\" :label=\"value\" :value=\"key\" :key=\"key\">{{ value }}</el-option>\r\n                        </el-select>\r\n                    </el-col>\r\n                    <el-col :span=\"5\">\r\n                        <el-select placeholder=\"请选择标题\" v-model=\"data.name\">\r\n                            <el-option v-for=\"(v,index) in list.list\" :value=\"v\" :key=\"index\">{{ v }}</el-option>\r\n                        </el-select>\r\n                    </el-col>\r\n                    <el-col :span=\"5\">\r\n                        <el-select placeholder=\"请选择尺寸\" v-model=\"data.size\">\r\n                            <el-option v-for=\"(v,index) in list.size\" :value=\"v\" :key=\"index\">{{ v }}</el-option>\r\n                        </el-select>\r\n                    </el-col>\r\n                    <el-col :span=\"8\">\r\n                        <el-button round class=\"primary-button\" @click=\"generaAgentPopularizeData\">查询</el-button>\r\n                        <el-button round plain @click=\"reset\">重置</el-button>\r\n                    </el-col>\r\n                </el-form-item>\r\n            </el-form>\r\n        </el-row>\r\n\r\n        <el-row class=\"agent_set_box\" v-for=\"(value,key) in list.data\" :key=\"key\" v-loading=\"showLoading\">\r\n            <el-col :span=\"24\" v-for=\"(v,index) in list.data[key]\" :key=\"index\">\r\n                <div class=\"left\">\r\n                    <img :src=\"v.url\">\r\n                </div>\r\n                <div class=\"right\">\r\n                    <div>\r\n                        <p><span>所属平台：</span>{{ v.platform }}</p>\r\n                        <p><span>更新日期：</span>{{ v.datetime }}</p>\r\n                        <p><span>图片尺寸：</span>{{ v.size }}<span class=\"primary-color\" style=\"opacity: 1;margin-left:10px;cursor: pointer;\" @click=\"download(v)\"><i class=\"el-icon-download\"></i>下载</span></p>\r\n                        <el-button round class=\"primary-button\" @click=\"renderClick(v.url)\">生成图片</el-button>\r\n                    </div>\r\n                </div>\r\n            </el-col>\r\n        </el-row>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import html2canvas from \"html2canvas\";\r\n    import { generaAgentPopularizeApi } from '../../http/api'\r\n    export default {\r\n        data() {\r\n            return {\r\n                showLoading: false,\r\n                data: {\r\n                    type: '1',\r\n                    genre: \"\",\r\n                    name: \"\",\r\n                    size: \"\"\r\n                },\r\n                list:\"\",\r\n            }\r\n        },\r\n        methods: {\r\n            // 初始化\r\n            generaAgentPopularizeData () {\r\n                var _this = this;\r\n                _this.showLoading = true;\r\n                generaAgentPopularizeApi(_this.data).then(res => {\r\n                    _this.showLoading = false;\r\n                    _this.list = res.data.message;\r\n                    localStorage.setItem('agentLink', res.data.message.url)\r\n                }).catch(err => {\r\n                    _this.showLoading = false\r\n                })\r\n            },\r\n            // 重置\r\n            reset() {\r\n                this.data = {\r\n                    type: '1',\r\n                    genre: \"\",\r\n                    name: \"\",\r\n                    size: \"\"\r\n                };\r\n                this.generaAgentPopularizeData()\r\n            },\r\n            getUrlBase64(url) {\r\n                return new Promise(resolve => {\r\n                    let canvas = document.createElement('canvas')\r\n                    let ctx = canvas.getContext('2d')\r\n                    let img = new Image()\r\n                    img.crossOrigin = 'Anonymous' //允许跨域\r\n                    img.src = url\r\n                    img.onload = function() {\r\n                        canvas.height = 300\r\n                        canvas.width = 300\r\n                        ctx.drawImage(img, 0, 0, 300, 300)\r\n                        let dataURL = canvas.toDataURL('image/png')\r\n                        canvas = null\r\n                        resolve(dataURL)\r\n                    }\r\n                })\r\n            },\r\n            // 下载\r\n            download(v) {\r\n                let canvas = document.createElement('canvas')\r\n                let ctx = canvas.getContext('2d')\r\n                let img = new Image()\r\n                img.crossOrigin = 'Anonymous' //允许跨域\r\n                img.src = v.url\r\n                img.onload = function() {\r\n                    canvas.height = img.height;\r\n                    canvas.width = img.width;\r\n                    ctx.drawImage(img, 0, 0, img.width, img.height)\r\n                    let dataURL = canvas.toDataURL('image/png')\r\n\r\n                    let link = document.createElement('a')\r\n                    link.href = dataURL\r\n                    link.download = v.title\r\n                    link.click()\r\n                }\r\n            },\r\n            // 生成图片\r\n            renderClick(url) {\r\n                var imgUrl = url;\r\n                localStorage.setItem('selectedBgImg', imgUrl);\r\n                this.$router.push('/generatePicture')\r\n            }\r\n        },\r\n        mounted() {\r\n            this.generaAgentPopularizeData()\r\n        },\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    @import '../../assets/css/promotionZone.css';\r\n</style>"]}]}