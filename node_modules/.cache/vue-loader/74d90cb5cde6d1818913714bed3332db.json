{"remainingRequest":"P:\\bm_admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!P:\\bm_admin\\src\\views\\reportCenter\\commissionReport.vue?vue&type=style&index=0&id=12d4f30a&scoped=true&lang=css&","dependencies":[{"path":"P:\\bm_admin\\src\\views\\reportCenter\\commissionReport.vue","mtime":1608958570000},{"path":"P:\\bm_admin\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"P:\\bm_admin\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"P:\\bm_admin\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"P:\\bm_admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"P:\\bm_admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgpAaW1wb3J0ICcuLi8uLi9hc3NldHMvY3NzL3JlcG9ydENlbnRlci5jc3MnOwo="},{"version":3,"sources":["commissionReport.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAydA","file":"commissionReport.vue","sourceRoot":"src/views/reportCenter","sourcesContent":["<template>\r\n    <div class=\"commission_report\" v-loading=\"showLoading\">\r\n        <h4 class=\"title\">佣金报表</h4>\r\n\r\n        <div v-for=\"(item, index) in list\" :key=\"index\" class=\"commission_box\">\r\n            <el-row class=\"commission_title\">\r\n                <div class=\"fix\">\r\n                    <span class=\"left\">{{ item.date_str }}</span>\r\n                </div>\r\n            </el-row>\r\n\r\n            <el-row :gutter=\"15\" class=\"commission_data\">\r\n                <el-col :span=\"6\">\r\n                    <div>\r\n                        <p>\r\n                            <i class=\"iconfont icon-qiandaizi yellow\"></i>\r\n                            当月佣金\r\n                            <el-tooltip placement=\"top\" class=\"item\">\r\n                                <div slot=\"content\" style=\"font-size: 14px;line-height: 24px\">每月2-5日发放上月佣金<br />当月佣金=实际盈亏*佣金比例+会员代存+上月结余+开客奖励+额外奖励<br/>正数为代理欠公司，负数为代理盈利。</div>\r\n                                <i class=\"el-icon-info\"></i>\r\n                            </el-tooltip>\r\n                        </p>\r\n                        <span :class=\"{ red: item.money < 0, green: item.money > 0}\">{{ item.money }}</span>\r\n                        <i class=\"iconfont detail primary-color\" :class=\"{ 'icon-plus': !item.showMoney, 'icon-reduce': item.showMoney }\" @click=\"moneyClick(item)\"></i>\r\n                    </div>\r\n                </el-col>\r\n                <el-col :span=\"6\">\r\n                    <div>\r\n                        <p>\r\n                            <i class=\"el-icon-user-solid\"></i>\r\n                            有效会员\r\n                        </p>\r\n                        <span>{{ item.valid }}</span>\r\n                    </div>\r\n                </el-col>\r\n                <el-col :span=\"6\">\r\n                    <div>\r\n                        <p>\r\n                            <i class=\"iconfont icon-16 yellow\"></i>\r\n                            实际盈亏\r\n                            <el-tooltip class=\"item\" effect=\"dark\" content=\"会员输赢+红利/返水+手续费+平台费\" placement=\"top\">\r\n                                <i class=\"el-icon-info\"></i>\r\n                            </el-tooltip>\r\n                        </p>\r\n                        <span :class=\"{ 'green': item.profit > 0, 'red': item.profit < 0 }\">{{ item.profit }}</span>\r\n                        <i class=\"iconfont detail primary-color\" :class=\"{ 'icon-plus': !item.showProfit, 'icon-reduce': item.showProfit }\" @click=\"profitClick(item)\"></i>\r\n                    </div>\r\n                </el-col>\r\n                <el-col :span=\"6\">\r\n                    <div>\r\n                        <p>\r\n                            <i class=\"iconfont icon-chart primary-color\"></i>\r\n                            佣金比例\r\n                        </p>\r\n                        <span>{{ item.rate }}</span>\r\n                    </div>\r\n                </el-col>\r\n            </el-row>\r\n\r\n            <!-- 当月佣金 -->\r\n            <el-row class=\"commission_table\" v-show=\"item.showMoney\">\r\n                <el-table\r\n                    :data=\"item.moneyList\"\r\n                    border\r\n                    style=\"width: 100%\">\r\n                    <el-table-column\r\n                        prop=\"profit\"\r\n                        label=\"实际盈亏\">\r\n                        <template slot-scope=\"scope\">\r\n                            <span :class=\"{ red: scope.row.profit < 0, green: scope.row.profit > 0}\">\r\n                                {{ scope.row.profit }}\r\n                            </span>\r\n                        </template>\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                        prop=\"rate\"\r\n                        label=\"佣金比例\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                        prop=\"last_balance\"\r\n                        label=\"上月结余\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                        label=\"资金调整\"\r\n                        align=\"center\">\r\n                        <el-table-column \r\n                            prop=\"valid_reward\"\r\n                            label=\"人头奖励\"\r\n                            align=\"center\"\r\n                            width=\"60\">\r\n                        </el-table-column>\r\n                        <el-table-column \r\n                            prop=\"other_reward\"\r\n                            label=\"额外奖励\"\r\n                            align=\"center\"\r\n                            width=\"60\">\r\n                        </el-table-column>\r\n                        <el-table-column \r\n                            prop=\"correction\"\r\n                            label=\"手工调整\"\r\n                            align=\"center\"\r\n                            width=\"60\">\r\n                        </el-table-column>\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                        label=\"代理邀请\"\r\n                        align=\"center\"\r\n                        v-if=\"level_id == 3 && bill_wtd\">\r\n                        <el-table-column \r\n                            prop=\"invite_back_reward\"\r\n                            label=\"返佣\"\r\n                            align=\"center\"\r\n                            width=\"60\">\r\n                        </el-table-column>\r\n                        <el-table-column \r\n                            prop=\"invite_correction\"\r\n                            label=\"人头奖励\"\r\n                            align=\"center\"\r\n                            width=\"60\">\r\n                        </el-table-column>\r\n                        <el-table-column \r\n                            prop=\"correction\"\r\n                            label=\"手工调整\"\r\n                            align=\"center\"\r\n                            width=\"60\">\r\n                        </el-table-column>\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                        prop=\"transfer_user\"\r\n                        label=\"会员代存\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                        label=\"当月佣金\">\r\n                        <template slot-scope=\"scope\">\r\n                            <span :class=\"{ red: scope.row.money < 0, green: scope.row.money > 0}\">\r\n                                {{ scope.row.money }}\r\n                            </span>\r\n                        </template>\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                        prop=\"leave_money\"\r\n                        label=\"本月结余\">\r\n                    </el-table-column>\r\n                </el-table>\r\n\r\n                <div class=\"distribution_time\">发放时间<span>{{ item.created_at }}</span></div>\r\n            </el-row>\r\n\r\n            <!-- 实际盈亏 -->\r\n            <el-row class=\"commission_table\" v-show=\"item.showProfit\">\r\n                <el-table\r\n                    :data=\"item.detail\"\r\n                    border\r\n                    style=\"width: 100%\">\r\n                    <el-table-column\r\n                        prop=\"code\"\r\n                        label=\"代理账号\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                        prop=\"payout\"\r\n                        label=\"会员输赢\">\r\n                            <template slot-scope=\"scope\">\r\n                                <span :class=\"{ 'green': scope.row.payout > 0, 'red': scope.row.payout < 0 }\">\r\n                                    {{ scope.row.payout }}\r\n                                </span>\r\n                            </template>\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                        label=\"红利/返水\"\r\n                        :render-header=\"bonusHeader\">\r\n                        <template slot-scope=\"scope\">\r\n                            <span>{{ (scope.row.bonus_money + scope.row.agent_bonus + scope.row.user_agent + scope.row.uservip_system + scope.row.bonus_system + scope.row.dpt_bonus_money + scope.row.water_money).toFixed(2) }}</span>\r\n                            <i class=\"iconfont primary-color\" :class=\"{ 'icon-plus': !showBonus[index], 'icon-reduce': showBonus[index] }\" style=\"float:right\" @click=\"bonusClick(index)\"></i>\r\n                        </template>\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                        prop=\"fee\"\r\n                        label=\"手续费\"\r\n                        :render-header=\"feeHeader\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                        label=\"平台费\">\r\n                        <template slot-scope=\"scope\">\r\n                            <span>{{ scope.row.game_fee }}</span>\r\n                        </template>\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                        label=\"实际盈亏\"\r\n                        :render-header=\"realHeader\">\r\n                            <template slot-scope=\"scope\">\r\n                                <span :class=\"{ 'green': scope.row.real_win_lost > 0, 'red': scope.row.real_win_lost < 0 }\">\r\n                                    {{ scope.row.real_win_lost }}\r\n                                </span>\r\n                            </template>\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                        label=\"其它\"\r\n                        width=\"100\"\r\n                        :render-header=\"otherHeader\">\r\n                        <template slot-scope=\"scope\">\r\n                            <i class=\"iconfont primary-color\" :class=\"{ 'icon-plus': !showOther[index], 'icon-reduce': showOther[index] }\" @click=\"otherClick(index)\"></i>\r\n                        </template>\r\n                    </el-table-column>\r\n                </el-table>\r\n                <!-- 红利表格 -->\r\n                <el-table\r\n                    :data=\"item.detail\"\r\n                    border\r\n                    style=\"width: 100%;margin-top: 10px\"\r\n                    v-show=\"item.showBonus\">\r\n                    <el-table-column\r\n                        prop=\"bonus_money\"\r\n                        label=\"红利\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                        prop=\"agent_bonus\"\r\n                        label=\"代理彩金\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                        prop=\"user_agent\"\r\n                        label=\"邀请有奖\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                        prop=\"uservip_system\"\r\n                        label=\"VIP系统\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                        prop=\"bonus_system\"\r\n                        label=\"彩金系统\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                        prop=\"dpt_bonus_money\"\r\n                        label=\"存款优惠\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                        prop=\"water_money\"\r\n                        label=\"返水\">\r\n                    </el-table-column>\r\n                </el-table>\r\n                <!-- 其它表格 -->\r\n                <el-table\r\n                    :data=\"item.detail\"\r\n                    border\r\n                    style=\"width: 100%;margin-top: 10px\"\r\n                    v-show=\"item.showOther\">\r\n                    <el-table-column\r\n                        prop=\"beat_num\"\r\n                        label=\"注单笔数\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                        prop=\"beat_money\"\r\n                        label=\"投注金额\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                        prop=\"valid_betamt\"\r\n                        label=\"有效投注\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                        prop=\"dpt_money\"\r\n                        label=\"存款金额\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                        prop=\"wtd_money\"\r\n                        label=\"提款金额\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                        prop=\"valid_user\"\r\n                        label=\"本月有效客\">\r\n                    </el-table-column>\r\n                </el-table>\r\n            </el-row>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import { commissionReportApi } from '../../http/api'\r\n    export default {\r\n        data() {\r\n            var myDate = new Date();\r\n            return {\r\n                list: [],\r\n                tableData: [],\r\n                showLoading: true,\r\n                showBonus: [false,false,false],\r\n                showOther: [false,false,false],\r\n                showFee: [false,false,false],\r\n                level_id: localStorage.getItem('level_id'),\r\n                bill_wtd: localStorage.getItem('bill_wtd')\r\n            }\r\n        },\r\n        methods: {\r\n            commissionReport () {\r\n                var _this = this;\r\n                commissionReportApi().then(res => {\r\n                    _this.showLoading = false;\r\n                    for(var i = 0; i < res.data.message.length; i++){\r\n                        res.data.message[i].showProfit = false;\r\n                        res.data.message[i].showMoney = false\r\n                    }\r\n                    _this.list = res.data.message;\r\n                    for(var i = 0; i < _this.list.length; i++){\r\n                        _this.list[i].detail = [_this.list[i].detail];\r\n                        _this.list[i].showBonus = false;\r\n                        _this.list[i].showOther = false;\r\n                        _this.list[i].moneyList = [\r\n                            {\r\n                                profit: _this.list[i].profit,\r\n                                rate: _this.list[i].rate,\r\n                                last_balance: _this.list[i].last_balance,\r\n                                valid_reward: _this.list[i].valid_reward,\r\n                                other_reward: _this.list[i].other_reward,\r\n                                correction: _this.list[i].correction,\r\n                                transfer_user: _this.list[i].detail[0].transfer_user,\r\n                                money: _this.list[i].money,\r\n                                leave_money: _this.list[i].leave_money,\r\n                                invite_back_reward: _this.list[i].invite_back_reward,\r\n                                invite_vuser_reward: _this.list[i].invite_vuser_reward,\r\n                                invite_correction: _this.list[i].invite_correction,\r\n                            }\r\n                        ]\r\n                    }\r\n                }).catch(err => {\r\n                    _this.showLoading = false\r\n                })\r\n            },\r\n            // 当月佣金+号事件\r\n            moneyClick (item) {\r\n                item.showMoney =! item.showMoney;\r\n                for(var i = 0; i < this.list.length; i++){\r\n                    this.list[i].showProfit = false;\r\n                }\r\n            },\r\n            // 实际盈亏+号事件\r\n            profitClick(item) {\r\n                item.showProfit =! item.showProfit;\r\n                for(var i = 0; i < this.list.length; i++){\r\n                    this.list[i].showMoney = false;\r\n                }\r\n            },\r\n            // 实际盈亏-红利/返水+号事件\r\n            bonusClick(index) {\r\n                var show = !this.list[index].showBonus;\r\n                this.$set(this.list, index, { ...this.list[index], showBonus: show })\r\n\r\n                var show2 = this.list[index].showBonus;\r\n                this.$set(this.showBonus, index, show2)\r\n            },\r\n            // 实际盈亏-其它+号事件\r\n            otherClick(index) {\r\n                var show = !this.list[index].showOther;\r\n                this.$set(this.list, index, { ...this.list[index], showOther: show })\r\n\r\n                var show2 = this.list[index].showOther;\r\n                this.$set(this.showOther, index, show2)\r\n            },\r\n            // 表头-实际盈亏\r\n            realHeader(h,{column}){\r\n                const inReview = '会员输赢+红利/返水+手续费+平台费'\r\n                return h(\r\n        　　　　    'div', [\r\n                        h('span', column.label),\r\n                        h('el-tooltip', {\r\n                            props: {\r\n                                placement: 'top'\r\n                            }\r\n                        }, [\r\n                            h('div', {\r\n                                slot: 'content',\r\n                                style: {\r\n                                    'width':'200px',\r\n                                    whiteSpace: 'normal',\r\n                                    'margin-bottom': '10px'\r\n                                }\r\n                            }, inReview),\r\n                            h('i', {\r\n                                class: 'el-icon-info',\r\n                                style: 'margin-left:5px;vertical-align: middle;color: #d5d5d5'\r\n                            })\r\n                        ],)\r\n                    ]\r\n        　　　　 )\r\n            },\r\n            // 表头-手续费\r\n            feeHeader (h,{column}) {\r\n                const inReview = '会员存款量的1%，代理存款不算'\r\n                return h(\r\n        　　　　    'div', [\r\n                        h('span', column.label),\r\n                        h('el-tooltip', {\r\n                            props: {\r\n                                placement: 'top'\r\n                            }\r\n                        }, [\r\n                            h('div', {\r\n                                slot: 'content',\r\n                                style: {\r\n                                    'width':'180px',\r\n                                    whiteSpace: 'normal',\r\n                                    'margin-bottom': '10px'\r\n                                }\r\n                            }, inReview),\r\n                            h('i', {\r\n                                class: 'el-icon-info',\r\n                                style: 'margin-left:5px;vertical-align: middle;color: #d5d5d5'\r\n                            })\r\n                        ],)\r\n                    ]\r\n        　　　　 )\r\n            },\r\n            // 表头-红利/返水\r\n            bonusHeader (h,{column}) {\r\n                const inReview = '红利+代理彩金+邀请有奖+VIP系统+彩金系统+返水'\r\n                return h(\r\n        　　　　    'div', [\r\n                        h('span', column.label),\r\n                        h('el-tooltip', {\r\n                            props: {\r\n                                placement: 'top'\r\n                            }\r\n                        }, [\r\n                            h('div', {\r\n                                slot: 'content',\r\n                                style: {\r\n                                    'width':'200px',\r\n                                    'line-height' : '18px',\r\n                                    whiteSpace: 'normal',\r\n                                    'margin-bottom': '10px'\r\n                                }\r\n                            }, inReview),\r\n                            h('i', {\r\n                                class: 'el-icon-info',\r\n                                style: 'margin-left:5px;vertical-align: middle;color: #d5d5d5'\r\n                            })\r\n                        ],)\r\n                    ]\r\n        　　　　 )\r\n            },\r\n            // 表头-其它\r\n            otherHeader(h,{column}) {\r\n                const inReview = '只作参考，不作计算'\r\n                return h(\r\n        　　　　    'div', [\r\n                        h('span', column.label),\r\n                        h('el-tooltip', {\r\n                            props: {\r\n                                placement: 'top'\r\n                            }\r\n                        }, [\r\n                            h('div', {\r\n                                slot: 'content',\r\n                                style: {\r\n                                    'width':'110px',\r\n                                    whiteSpace: 'normal',\r\n                                    'margin-bottom': '10px'\r\n                                }\r\n                            }, inReview),\r\n                            h('i', {\r\n                                class: 'el-icon-info',\r\n                                style: 'margin-left:5px;vertical-align: middle;color: #d5d5d5'\r\n                            })\r\n                        ],)\r\n                    ]\r\n        　　　　 )\r\n            }\r\n        },\r\n        mounted() {\r\n            this.commissionReport()\r\n        },\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    @import '../../assets/css/reportCenter.css';\r\n</style>"]}]}