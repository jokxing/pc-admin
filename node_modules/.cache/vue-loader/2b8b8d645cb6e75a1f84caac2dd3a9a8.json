{"remainingRequest":"D:\\vue3\\bm_admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue3\\bm_admin\\src\\views\\home\\home.vue?vue&type=style&index=0&id=39f87be5&scoped=true&lang=css&","dependencies":[{"path":"D:\\vue3\\bm_admin\\src\\views\\home\\home.vue","mtime":1611747309208},{"path":"D:\\vue3\\bm_admin\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue3\\bm_admin\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\vue3\\bm_admin\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\vue3\\bm_admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue3\\bm_admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCkBpbXBvcnQgdXJsKC4uLy4uL2Fzc2V0cy9jc3MvaG9tZS5jc3MpOwo="},{"version":3,"sources":["home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8XA","file":"home.vue","sourceRoot":"src/views/home","sourcesContent":["<template>\r\n    <div class=\"home\">\r\n        <el-row class=\"home_top\" :gutter=\"10\">\r\n            <h4 class=\"title\">本月数据概览</h4>\r\n            <el-col>\r\n                <div class=\"bg\">\r\n                    <p class=\"primary-color\">\r\n                        <i class=\"el-icon-loading\" v-show=\"dataLoading\"></i>\r\n                        {{ homeData.register_user }}\r\n                    </p>\r\n                    <span>注册会员(本月)</span>\r\n                </div>\r\n            </el-col>\r\n            <el-col>\r\n                <div class=\"bg\">\r\n                    <p class=\"primary-color\">\r\n                        <i class=\"el-icon-loading\" v-show=\"dataLoading\"></i>\r\n                        {{ homeData.valid_user }}\r\n                    </p>\r\n                    <span>\r\n                        有效会员(本月) \r\n                        <el-tooltip class=\"item\" effect=\"dark\" content=\"本月注册，存款500以上，流水2000以上\" placement=\"bottom\">\r\n                            <i class=\"el-icon-info\"></i>\r\n                        </el-tooltip>\r\n                    </span>\r\n                </div>\r\n            </el-col>\r\n            <el-col>\r\n                <div class=\"bg\">\r\n                    <p class=\"primary-color\">\r\n                        <i class=\"el-icon-loading\" v-show=\"dataLoading\"></i>\r\n                        {{ homeData.user_num }}\r\n                    </p>\r\n                    <span>\r\n                        活跃人数(本月)  \r\n                        <el-tooltip class=\"item\" effect=\"dark\" content=\"本月登录过的玩家\" placement=\"bottom\">\r\n                            <i class=\"el-icon-info\"></i>\r\n                        </el-tooltip>\r\n                    </span>\r\n                </div>\r\n            </el-col>\r\n            <el-col>\r\n                <div class=\"bg last\">\r\n                    <p :class=\"{ 'primary-color' : homeData.payout >= 0, 'red': homeData.payout < 0 }\">\r\n                        <i class=\"el-icon-loading primary-color\" v-show=\"dataLoading\"></i>\r\n                        {{ homeData.payout }}\r\n                    </p>\r\n                    <span class=\"primary-bg\">\r\n                        实际盈亏 \r\n                        <el-tooltip class=\"item\" effect=\"dark\" content=\"负数代表玩家输钱，正数代表玩家赢钱\" placement=\"bottom\">\r\n                            <i class=\"el-icon-info\" style=\"color: #fff\"></i>\r\n                        </el-tooltip>\r\n                    </span>\r\n                </div>\r\n            </el-col>\r\n            <div class=\"commission_rate\" v-if=\"bill_wtd\">\r\n                <el-progress type=\"dashboard\" :percentage=\"homeData.rate\" color=\"#5C7DEC\" :width=\"190\"></el-progress>\r\n                <p>佣金比例</p>\r\n            </div>\r\n        </el-row>\r\n\r\n        <el-row class=\"home_bot\" v-loading=\"reporLoading\">\r\n            <h4 class=\"title\">数据对比</h4>\r\n            <!-- 选择日期 -->\r\n            <div class=\"date\">\r\n                <el-date-picker\r\n                    v-model=\"month\"\r\n                    type=\"month\"\r\n                    align=\"right\"\r\n                    :picker-options=\"pickerOptions\"\r\n                    value-format=\"yyyy-MM\"\r\n                    @change=\"indexReportData('isDate')\"\r\n                    placeholder=\"选择月\">\r\n                </el-date-picker>\r\n            </div>\r\n            <!-- 金额和人数Tab -->\r\n            <div class=\"money_tab\">\r\n                <el-tooltip class=\"item\" effect=\"dark\" placement=\"right\">\r\n                    <div slot=\"content\" style=\"line-height: 18px;\">新注册存款金额：时间段内注册用户的累<br />计存款金额<br />老用户存款金额：所选时间之前注册用户,<br />在当前所选时间内存款的金额<br />首存金额：所选时间内注册用户的首次存<br />款金额<br />总存款金额：所选时间内用户的累计存款<br />金额<br />投注金额：所选时间内用户的累计投注金<br />额<br />有效投注：所选时间内用户的累计有效投<br />注金额<br />输赢：所选时间内用户的累计输赢\r\n                    </div>\r\n                    <i class=\"el-icon-info\"></i>\r\n                </el-tooltip>\r\n            </div>\r\n\r\n            <!-- 数据 -->\r\n            <div id=\"chartLine\" style=\"width:100%; height:400px;\"></div>\r\n\r\n            <div class=\"data_tab\">\r\n                <ul>\r\n                    <li v-for=\"(item, index) in dataTab\" :key=\"index\" :class=\"{ bor_active: dataTabNum == index }\" @click=\"dataTabClick(item,index)\">\r\n                        <span></span>\r\n                        {{ item }}\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        </el-row>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import { indexInfoApi,indexReportApi } from '../../http/api.js'\r\n    export default {\r\n        data() {\r\n            var myDate = new Date();\r\n            return {\r\n                dataLoading: true,\r\n                reporLoading: true,\r\n                content: '新注册存款金额：时间段内注册用户的累计存款金额' + '\\n' + '老用户存款金额：所选时间之前注册用户,在当前所选时间内存款的金额' + '\\n' + '首存金额：所选时间内注册用户的首次存款金额' + '\\n' + '总存款金额：所选时间内用户的累计存款金额' + '\\n' + '投注金额：所选时间内用户的累计投注金额' + '\\n' + '有效投注：所选时间内用户的累计有效投注金额' + '\\n' + '输赢：所选时间内用户的累计输赢',\r\n                month: myDate.getFullYear() + \"-\" + (myDate.getMonth() + 1),\r\n                pickerOptions: {\r\n                    disabledDate: (time) => {\r\n                        return time.getTime() < (myDate.getTime() - 24*60*60*1000*31*3) || time.getTime() >= (Date.now())\r\n                    }\r\n                },\r\n                option: {\r\n                    tooltip: {\r\n                        trigger: 'axis',\r\n                    },\r\n                    grid: {\r\n                        left: 0,\r\n                        right: 20,\r\n                        bottom: 20,\r\n                        top: 50,\r\n                        containLabel: true\r\n                    },\r\n                    toolbox: {\r\n                        feature: {}\r\n                    },\r\n                    xAxis: {\r\n                        type: 'category',\r\n                        boundaryGap: false,\r\n                        data: []\r\n                    },\r\n                    yAxis: {\r\n                        type: 'value'\r\n                    },\r\n                    series: [\r\n                        {\r\n                            name:'当月',\r\n                            type:'line',\r\n                            color: '#5C7DEC',\r\n                            data: [],\r\n                        },\r\n                        {\r\n                            name:'上月',\r\n                            type:'line',\r\n                            color: \"#00c01c\",\r\n                            data:[]\r\n                        }\r\n                    ]\r\n                },\r\n                dataTab: ['输赢金额','新注册人数','存提款金额','存提款人数','投注金额'],\r\n                dataTabNum: 0,\r\n                dataTabName: \"输赢金额\",\r\n                // 首页-数据展示\r\n                homeData: {},\r\n                bill_wtd: false,\r\n                // 首页-报表\r\n                homeDeportData: '',\r\n                homeDeport: \"\"\r\n            }\r\n        },\r\n        methods: {\r\n            // 数据\r\n            indexInfoData () {\r\n                var _this = this;\r\n                indexInfoApi().then(res => {\r\n                    _this.dataLoading = false;\r\n                    _this.homeData = res.data.message;\r\n                }).catch(err => {\r\n                    _this.dataLoading = false;\r\n                })\r\n            },\r\n            // 报表\r\n            indexReportData (index) {\r\n                var _this = this;\r\n                this.reporLoading = true;\r\n                indexReportApi(_this.month).then(res => {\r\n                    _this.reporLoading = false;\r\n                    _this.homeDeportData = res.data.message;\r\n                    if(_this.dataTabNum == 0) {\r\n                        _this.homeDeport = _this.homeDeportData.winCount\r\n                    }else if(_this.dataTabNum == 1){\r\n                        _this.homeDeport = _this.homeDeportData.newRegCount\r\n                    }else if(_this.dataTabNum == 2){\r\n                        _this.homeDeport = _this.homeDeportData.drawDepMoneyCount\r\n                    }else if(_this.dataTabNum == 3){\r\n                        _this.homeDeport = _this.homeDeportData.drawDepUserCount\r\n                    }else{\r\n                        _this.homeDeport = _this.homeDeportData.BeatCount\r\n                    }\r\n                }).catch(err => {\r\n                    _this.reporLoading = false;\r\n                })\r\n            },\r\n            // tab\r\n            dataTabClick (item,index) {\r\n                this.dataTabName = item;\r\n                this.dataTabNum = index;\r\n                if(index == 0) {\r\n                    this.homeDeport = this.homeDeportData.winCount\r\n                }else if(index == 1){\r\n                    this.homeDeport = this.homeDeportData.newRegCount\r\n                }else if(index == 2){\r\n                    this.homeDeport = this.homeDeportData.drawDepMoneyCount\r\n                }else if(index == 3){\r\n                    this.homeDeport = this.homeDeportData.drawDepUserCount\r\n                }else{\r\n                    this.homeDeport = this.homeDeportData.BeatCount\r\n                }\r\n            }\r\n        },\r\n        created() {\r\n            var myDate = new Date();\r\n            var date = myDate.getDate();\r\n            for(var i=1; i<=date; i++){\r\n                this.option.xAxis.data.push(i + \"日\",)\r\n            }\r\n            this.indexReportData()\r\n        },\r\n        mounted() {\r\n            var  _this = this;\r\n            var myChart = this.$echarts.init(document.getElementById('chartLine'));\r\n            myChart.setOption(this.option);\r\n            \r\n            var set = setInterval(function(){\r\n                if(localStorage.getItem('bill_wtd')){\r\n                    clearInterval(set);\r\n                    _this.bill_wtd = JSON.parse(localStorage.getItem('bill_wtd'))\r\n                }\r\n            },200)\r\n\r\n            this.indexInfoData()\r\n        },\r\n        watch: {\r\n            homeDeport: {\r\n                handler (newVal, oldVal) {\r\n                    var months = this.month.split(\"-\")\r\n                    var nowDate = new Date();\r\n                    var nowMonth = nowDate.getMonth() + 1;\r\n                    if(parseFloat(months[1]) == nowMonth){\r\n                        var date = nowDate.getDate();\r\n                        var dateArr = []\r\n                        for(var i=1; i<=date; i++){\r\n                            dateArr.push(i + \"日\",)\r\n                        }\r\n                    }else{\r\n                        var myDate = new Date(months[0],months[1],0);\r\n                        var date = myDate.getDate();\r\n                        var dateArr = []\r\n                        for(var i=1; i<=date; i++){\r\n                            dateArr.push(i + \"日\",)\r\n                        }\r\n                    }\r\n                    if(this.homeDeport instanceof Array){\r\n                        this.option = {\r\n                            tooltip: {\r\n                                trigger: 'axis',\r\n                            },\r\n                            grid: {\r\n                                left: 0,\r\n                                right: 20,\r\n                                bottom: 20,\r\n                                top: 50,\r\n                                containLabel: true\r\n                            },\r\n                            toolbox: {\r\n                                feature: {}\r\n                            },\r\n                            xAxis: {\r\n                                type: 'category',\r\n                                boundaryGap: false,\r\n                                data: dateArr\r\n                            },\r\n                            yAxis: {\r\n                                type: 'value'\r\n                            },\r\n                            series: [\r\n                                {\r\n                                    type:'line',\r\n                                    color: '#5C7DEC',\r\n                                    data: this.homeDeport,\r\n                                },\r\n                            ]\r\n                        }\r\n                    }else{\r\n                        if(this.dataTabName == '存提款金额'){\r\n                            this.option = {\r\n                                tooltip: {\r\n                                    trigger: 'axis',\r\n                                },\r\n                                legend: {\r\n                                    data:['取款金额','存款金额']\r\n                                },\r\n                                grid: {\r\n                                    left: 0,\r\n                                    right: 20,\r\n                                    bottom: 20,\r\n                                    top: 50,\r\n                                    containLabel: true\r\n                                },\r\n                                toolbox: {\r\n                                    feature: {}\r\n                                },\r\n                                xAxis: {\r\n                                    type: 'category',\r\n                                    boundaryGap: false,\r\n                                    data: dateArr\r\n                                },\r\n                                yAxis: {\r\n                                    type: 'value'\r\n                                },\r\n                                series: [\r\n                                    {\r\n                                        name:'取款金额',\r\n                                        type:'line',\r\n                                        color: '#5C7DEC',\r\n                                        data: this.homeDeport.draw,\r\n                                    },\r\n                                    {\r\n                                        name:'存款金额',\r\n                                        type:'line',\r\n                                        color: '#00c01c',\r\n                                        data: this.homeDeport.dpt,\r\n                                    },\r\n                                ]\r\n                            }\r\n                        }\r\n                        if(this.dataTabName == '存提款人数'){\r\n                            this.option = {\r\n                                tooltip: {\r\n                                    trigger: 'axis',\r\n                                },\r\n                                legend: {\r\n                                    data:['取款人数','存款人数']\r\n                                },\r\n                                grid: {\r\n                                    left: 0,\r\n                                    right: 20,\r\n                                    bottom: 20,\r\n                                    top: 50,\r\n                                    containLabel: true\r\n                                },\r\n                                toolbox: {\r\n                                    feature: {}\r\n                                },\r\n                                xAxis: {\r\n                                    type: 'category',\r\n                                    boundaryGap: false,\r\n                                    data: dateArr\r\n                                },\r\n                                yAxis: {\r\n                                    type: 'value'\r\n                                },\r\n                                series: [\r\n                                    {\r\n                                        name:'取款人数',\r\n                                        type:'line',\r\n                                        color: '#5C7DEC',\r\n                                        data: this.homeDeport.draw,\r\n                                    },\r\n                                    {\r\n                                        name:'存款人数',\r\n                                        type:'line',\r\n                                        color: '#00c01c',\r\n                                        data: this.homeDeport.dpt,\r\n                                    },\r\n                                ]\r\n                            }\r\n                        }\r\n                    }\r\n                    var myChart = this.$echarts.init(document.getElementById('chartLine'));\r\n                    myChart.clear()\r\n                    myChart.setOption(this.option);\r\n                },\r\n                deep: true\r\n            },\r\n        },\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    @import url(../../assets/css/home.css);\r\n</style>"]}]}