{"remainingRequest":"D:\\vue3\\bm_admin\\node_modules\\babel-loader\\lib\\index.js!D:\\vue3\\bm_admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\vue3\\bm_admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue3\\bm_admin\\src\\views\\promotionZone\\agentSet.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue3\\bm_admin\\src\\views\\promotionZone\\agentSet.vue","mtime":1600156109163},{"path":"D:\\vue3\\bm_admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue3\\bm_admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\vue3\\bm_admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue3\\bm_admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBodG1sMmNhbnZhcyBmcm9tICJodG1sMmNhbnZhcyI7CmltcG9ydCB7IGdlbmVyYUFnZW50UG9wdWxhcml6ZUFwaSB9IGZyb20gJy4uLy4uL2h0dHAvYXBpJzsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzaG93TG9hZGluZzogZmFsc2UsCiAgICAgIGRhdGE6IHsKICAgICAgICB0eXBlOiAnMScsCiAgICAgICAgZ2VucmU6ICIiLAogICAgICAgIG5hbWU6ICIiLAogICAgICAgIHNpemU6ICIiCiAgICAgIH0sCiAgICAgIGxpc3Q6ICIiCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgLy8g5Yid5aeL5YyWCiAgICBnZW5lcmFBZ2VudFBvcHVsYXJpemVEYXRhOiBmdW5jdGlvbiBnZW5lcmFBZ2VudFBvcHVsYXJpemVEYXRhKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgX3RoaXMuc2hvd0xvYWRpbmcgPSB0cnVlOwogICAgICBnZW5lcmFBZ2VudFBvcHVsYXJpemVBcGkoX3RoaXMuZGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMuc2hvd0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICBfdGhpcy5saXN0ID0gcmVzLmRhdGEubWVzc2FnZTsKICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYWdlbnRMaW5rJywgcmVzLmRhdGEubWVzc2FnZS51cmwpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgX3RoaXMuc2hvd0xvYWRpbmcgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g6YeN572uCiAgICByZXNldDogZnVuY3Rpb24gcmVzZXQoKSB7CiAgICAgIHRoaXMuZGF0YSA9IHsKICAgICAgICB0eXBlOiAnMScsCiAgICAgICAgZ2VucmU6ICIiLAogICAgICAgIG5hbWU6ICIiLAogICAgICAgIHNpemU6ICIiCiAgICAgIH07CiAgICAgIHRoaXMuZ2VuZXJhQWdlbnRQb3B1bGFyaXplRGF0YSgpOwogICAgfSwKICAgIGdldFVybEJhc2U2NDogZnVuY3Rpb24gZ2V0VXJsQmFzZTY0KHVybCkgewogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7CiAgICAgICAgdmFyIGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpOwogICAgICAgIHZhciBpbWcgPSBuZXcgSW1hZ2UoKTsKICAgICAgICBpbWcuY3Jvc3NPcmlnaW4gPSAnQW5vbnltb3VzJzsgLy/lhYHorrjot6jln58KCiAgICAgICAgaW1nLnNyYyA9IHVybDsKCiAgICAgICAgaW1nLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGNhbnZhcy5oZWlnaHQgPSAzMDA7CiAgICAgICAgICBjYW52YXMud2lkdGggPSAzMDA7CiAgICAgICAgICBjdHguZHJhd0ltYWdlKGltZywgMCwgMCwgMzAwLCAzMDApOwogICAgICAgICAgdmFyIGRhdGFVUkwgPSBjYW52YXMudG9EYXRhVVJMKCdpbWFnZS9wbmcnKTsKICAgICAgICAgIGNhbnZhcyA9IG51bGw7CiAgICAgICAgICByZXNvbHZlKGRhdGFVUkwpOwogICAgICAgIH07CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOS4i+i9vQogICAgZG93bmxvYWQ6IGZ1bmN0aW9uIGRvd25sb2FkKHYpIHsKICAgICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpOwogICAgICB2YXIgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7CiAgICAgIHZhciBpbWcgPSBuZXcgSW1hZ2UoKTsKICAgICAgaW1nLmNyb3NzT3JpZ2luID0gJ0Fub255bW91cyc7IC8v5YWB6K646Leo5Z+fCgogICAgICBpbWcuc3JjID0gdi51cmw7CgogICAgICBpbWcub25sb2FkID0gZnVuY3Rpb24gKCkgewogICAgICAgIGNhbnZhcy5oZWlnaHQgPSBpbWcuaGVpZ2h0OwogICAgICAgIGNhbnZhcy53aWR0aCA9IGltZy53aWR0aDsKICAgICAgICBjdHguZHJhd0ltYWdlKGltZywgMCwgMCwgaW1nLndpZHRoLCBpbWcuaGVpZ2h0KTsKICAgICAgICB2YXIgZGF0YVVSTCA9IGNhbnZhcy50b0RhdGFVUkwoJ2ltYWdlL3BuZycpOwogICAgICAgIHZhciBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgIGxpbmsuaHJlZiA9IGRhdGFVUkw7CiAgICAgICAgbGluay5kb3dubG9hZCA9IHYudGl0bGU7CiAgICAgICAgbGluay5jbGljaygpOwogICAgICB9OwogICAgfSwKICAgIC8vIOeUn+aIkOWbvueJhwogICAgcmVuZGVyQ2xpY2s6IGZ1bmN0aW9uIHJlbmRlckNsaWNrKHVybCkgewogICAgICB2YXIgaW1nVXJsID0gdXJsOwogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnc2VsZWN0ZWRCZ0ltZycsIGltZ1VybCk7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvZ2VuZXJhdGVQaWN0dXJlJyk7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5nZW5lcmFBZ2VudFBvcHVsYXJpemVEYXRhKCk7CiAgfQp9Ow=="},{"version":3,"sources":["agentSet.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div class=\"agent_set\">\r\n        <h4 class=\"title\">推广素材</h4>\r\n\r\n        <el-row :gutter=\"6\" class=\"head\">\r\n            <el-form>\r\n                <el-form-item>\r\n                    <el-col :span=\"8\">\r\n                         <el-radio-group v-model=\"data.type\">\r\n                            <el-radio-button label=\"1\">全部</el-radio-button>\r\n                            <el-radio-button label=\"2\">本月</el-radio-button>\r\n                            <el-radio-button label=\"3\">近三月</el-radio-button>\r\n                            <el-radio-button label=\"4\">半年内</el-radio-button>\r\n                        </el-radio-group>\r\n                    </el-col>\r\n                </el-form-item>\r\n                <el-form-item>\r\n                    <el-col :span=\"5\">\r\n                        <el-select placeholder=\"请选择类型\" v-model=\"data.genre\">\r\n                            <el-option v-for=\"(value, key) in list.genre\" :label=\"value\" :value=\"key\" :key=\"key\">{{ value }}</el-option>\r\n                        </el-select>\r\n                    </el-col>\r\n                    <el-col :span=\"5\">\r\n                        <el-select placeholder=\"请选择标题\" v-model=\"data.name\">\r\n                            <el-option v-for=\"(v,index) in list.list\" :value=\"v\" :key=\"index\">{{ v }}</el-option>\r\n                        </el-select>\r\n                    </el-col>\r\n                    <el-col :span=\"5\">\r\n                        <el-select placeholder=\"请选择尺寸\" v-model=\"data.size\">\r\n                            <el-option v-for=\"(v,index) in list.size\" :value=\"v\" :key=\"index\">{{ v }}</el-option>\r\n                        </el-select>\r\n                    </el-col>\r\n                    <el-col :span=\"8\">\r\n                        <el-button round class=\"primary-button\" @click=\"generaAgentPopularizeData\">查询</el-button>\r\n                        <el-button round plain @click=\"reset\">重置</el-button>\r\n                    </el-col>\r\n                </el-form-item>\r\n            </el-form>\r\n        </el-row>\r\n\r\n        <el-row class=\"agent_set_box\" v-for=\"(value,key) in list.data\" :key=\"key\" v-loading=\"showLoading\">\r\n            <el-col :span=\"24\" v-for=\"(v,index) in list.data[key]\" :key=\"index\">\r\n                <div class=\"left\">\r\n                    <img :src=\"v.url\">\r\n                </div>\r\n                <div class=\"right\">\r\n                    <div>\r\n                        <p><span>所属平台：</span>{{ v.platform }}</p>\r\n                        <p><span>更新日期：</span>{{ v.datetime }}</p>\r\n                        <p><span>图片尺寸：</span>{{ v.size }}<span class=\"primary-color\" style=\"opacity: 1;margin-left:10px;cursor: pointer;\" @click=\"download(v)\"><i class=\"el-icon-download\"></i>下载</span></p>\r\n                        <el-button round class=\"primary-button\" @click=\"renderClick(v.url)\">生成图片</el-button>\r\n                    </div>\r\n                </div>\r\n            </el-col>\r\n        </el-row>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import html2canvas from \"html2canvas\";\r\n    import { generaAgentPopularizeApi } from '../../http/api'\r\n    export default {\r\n        data() {\r\n            return {\r\n                showLoading: false,\r\n                data: {\r\n                    type: '1',\r\n                    genre: \"\",\r\n                    name: \"\",\r\n                    size: \"\"\r\n                },\r\n                list:\"\",\r\n            }\r\n        },\r\n        methods: {\r\n            // 初始化\r\n            generaAgentPopularizeData () {\r\n                var _this = this;\r\n                _this.showLoading = true;\r\n                generaAgentPopularizeApi(_this.data).then(res => {\r\n                    _this.showLoading = false;\r\n                    _this.list = res.data.message;\r\n                    localStorage.setItem('agentLink', res.data.message.url)\r\n                }).catch(err => {\r\n                    _this.showLoading = false\r\n                })\r\n            },\r\n            // 重置\r\n            reset() {\r\n                this.data = {\r\n                    type: '1',\r\n                    genre: \"\",\r\n                    name: \"\",\r\n                    size: \"\"\r\n                };\r\n                this.generaAgentPopularizeData()\r\n            },\r\n            getUrlBase64(url) {\r\n                return new Promise(resolve => {\r\n                    let canvas = document.createElement('canvas')\r\n                    let ctx = canvas.getContext('2d')\r\n                    let img = new Image()\r\n                    img.crossOrigin = 'Anonymous' //允许跨域\r\n                    img.src = url\r\n                    img.onload = function() {\r\n                        canvas.height = 300\r\n                        canvas.width = 300\r\n                        ctx.drawImage(img, 0, 0, 300, 300)\r\n                        let dataURL = canvas.toDataURL('image/png')\r\n                        canvas = null\r\n                        resolve(dataURL)\r\n                    }\r\n                })\r\n            },\r\n            // 下载\r\n            download(v) {\r\n                let canvas = document.createElement('canvas')\r\n                let ctx = canvas.getContext('2d')\r\n                let img = new Image()\r\n                img.crossOrigin = 'Anonymous' //允许跨域\r\n                img.src = v.url\r\n                img.onload = function() {\r\n                    canvas.height = img.height;\r\n                    canvas.width = img.width;\r\n                    ctx.drawImage(img, 0, 0, img.width, img.height)\r\n                    let dataURL = canvas.toDataURL('image/png')\r\n\r\n                    let link = document.createElement('a')\r\n                    link.href = dataURL\r\n                    link.download = v.title\r\n                    link.click()\r\n                }\r\n            },\r\n            // 生成图片\r\n            renderClick(url) {\r\n                var imgUrl = url;\r\n                localStorage.setItem('selectedBgImg', imgUrl);\r\n                this.$router.push('/generatePicture')\r\n            }\r\n        },\r\n        mounted() {\r\n            this.generaAgentPopularizeData()\r\n        },\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    @import '../../assets/css/promotionZone.css';\r\n</style>"],"sourceRoot":"src/views/promotionZone"}]}