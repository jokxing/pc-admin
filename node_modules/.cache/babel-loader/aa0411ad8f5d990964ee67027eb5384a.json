{"remainingRequest":"E:\\工作\\bm_admin\\node_modules\\babel-loader\\lib\\index.js!E:\\工作\\bm_admin\\src\\http\\axios.js","dependencies":[{"path":"E:\\工作\\bm_admin\\src\\http\\axios.js","mtime":1610792706000},{"path":"E:\\工作\\bm_admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\工作\\bm_admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBfTWVzc2FnZTIgZnJvbSAiZWxlbWVudC11aS9saWIvbWVzc2FnZSI7CmltcG9ydCBfTWVzc2FnZSBmcm9tICJlbGVtZW50LXVpL2xpYi9tZXNzYWdlIjsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHJvdXRlciBmcm9tICdAL3JvdXRlcic7CmltcG9ydCB7IGd1aWQsIGdldFNlcnZlckRhdGUgfSBmcm9tICcuL3V0aWxzLmpzJzsgLy8gYXhpb3MuZGVmYXVsdHMudGltZW91dCA9IDEwMDAwIC8vIOivt+axgui2heaXtuaXtumXtAoKdmFyIFNlcnZpY2UgPSBheGlvcy5jcmVhdGUoewogIGJhc2VVUkw6ICcvJwp9KTsgLy8gYXhpb3Mg6K+35rGC5oum5oiq5ZmoCgp2YXIgc2VydmVyVGltZXN0YW1wID0gZ2V0U2VydmVyRGF0ZSgpOwp2YXIgbG9jYWxUaW1lc3RhbXAgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKU2VydmljZS5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoZnVuY3Rpb24gKGNvbmZpZykgewogIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiYWNjZXNzX3Rva2VuIikpIHsKICAgIGNvbmZpZy5oZWFkZXJzLkF1dGhvcml6YXRpb24gPSAnQmVhcmVyJyArICcgICcgKyBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYWNjZXNzX3Rva2VuJyk7CiAgfQoKICB2YXIgdGltZXN0YW1wID0gTWF0aC5jZWlsKChuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIGxvY2FsVGltZXN0YW1wICsgc2VydmVyVGltZXN0YW1wKSAvIDEwMDApOwogIHZhciBub25jZSA9IGd1aWQoKTsKICB2YXIgc2lnbmF0dXJlID0gYWVzKHRpbWVzdGFtcCwgc2VydmVyVGltZXN0YW1wLCBsb2NhbFRpbWVzdGFtcCwgbm9uY2UsIGNvbmZpZy51cmwpOwogIGNvbmZpZy5oZWFkZXJzWydUaW1lc3RhbXAnXSA9IHRpbWVzdGFtcDsKICBjb25maWcuaGVhZGVyc1snTm9uY2UnXSA9IG5vbmNlOwogIGNvbmZpZy5oZWFkZXJzWydTaWduYXR1cmUnXSA9IHNpZ25hdHVyZTsKICByZXR1cm4gY29uZmlnOwp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICBfTWVzc2FnZS5lcnJvcih7CiAgICBtZXNzYWdlOiAn6K+35rGC6LaF5pe2IScKICB9KTsKCiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7IC8vIGF4aW9zIHJlc3BvbmXmi6bmiKrlmagKCndpbmRvdy5pID0gMDsKU2VydmljZS5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKGZ1bmN0aW9uIChyZXMpIHsKICB3aW5kb3cuaSA9IDA7CgogIGlmIChyZXMuc3RhdHVzID09IDIwMCkgewogICAgcmV0dXJuIHJlczsKICB9IGVsc2UgaWYgKHJlcy5zdGF0dXMgPT0gNDAxKSB7CiAgICByb3V0ZXIucHVzaCgnL2xvZ2luJyk7CiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnYWNjZXNzX3Rva2VuJyk7CiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnZXhwaXJlc190aW1lJyk7CiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnbW9iaWxlJyk7CiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnYWdlbnRMaW5rJyk7CiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnd2l0aGRyYXdNb25leScpOwogICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3NlbGVjdGVkQmdJbWcnKTsKICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdtb25leScpOwogICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2dlbmVyYXRlQmFua0NhcmREYXRhJyk7CiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnY21vbmV5Jyk7CiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnaGFzX3BheV9wd2QnKTsKICAgIHJldHVybiByZXM7CiAgfSBlbHNlIGlmIChyZXMuc3RhdHVzID09IDIwMSkgewogICAgcmV0dXJuIHJlczsKICB9CgogIHJldHVybiByZXM7Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogIGlmIChlcnJvciAmJiBlcnJvci5yZXNwb25zZSkgewogICAgdmFyIHJlc3BvbnNlQ29kZSA9IGVycm9yLnJlc3BvbnNlLnN0YXR1czsKCiAgICBzd2l0Y2ggKHJlc3BvbnNlQ29kZSkgewogICAgICBjYXNlIDQwMDoKICAgICAgICBlcnJvci5tZXNzYWdlID0gJ+ivt+axgumUmeivryg0MDApJzsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgNDAxOgogICAgICAgIGVycm9yLm1lc3NhZ2UgPSBlcnJvci5yZXNwb25zZS5kYXRhLm1lc3NhZ2U7CiAgICAgICAgcm91dGVyLnB1c2goJy9sb2dpbicpOwogICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdhY2Nlc3NfdG9rZW4nKTsKICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnZXhwaXJlc190aW1lJyk7CiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ21vYmlsZScpOwogICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdhZ2VudExpbmsnKTsKICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnd2l0aGRyYXdNb25leScpOwogICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdzZWxlY3RlZEJnSW1nJyk7CiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ21vbmV5Jyk7CiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2dlbmVyYXRlQmFua0NhcmREYXRhJyk7CiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2Ntb25leScpOwogICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdoYXNfcGF5X3B3ZCcpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSA0MDM6CiAgICAgICAgZXJyb3IubWVzc2FnZSA9ICfmi5Lnu53orr/pl64oNDAzKSc7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIDQwNDoKICAgICAgICBlcnJvci5tZXNzYWdlID0gJ+ivt+axguWHuumUmSg0MDQpJzsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgNDA4OgogICAgICAgIGVycm9yLm1lc3NhZ2UgPSAn6K+35rGC6LaF5pe2KDQwOCknOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSA1MDA6CiAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlLmRhdGEubWVzc2FnZSA9PSAnVW5hdXRoZW50aWNhdGVkLicpIHsKICAgICAgICAgIGVycm9yLm1lc3NhZ2UgPSAnJzsKICAgICAgICAgIHJvdXRlci5wdXNoKCcvbG9naW4nKTsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdhY2Nlc3NfdG9rZW4nKTsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdleHBpcmVzX3RpbWUnKTsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdtb2JpbGUnKTsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdhZ2VudExpbmsnKTsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd3aXRoZHJhd01vbmV5Jyk7CiAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnc2VsZWN0ZWRCZ0ltZycpOwogICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ21vbmV5Jyk7CiAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnZ2VuZXJhdGVCYW5rQ2FyZERhdGEnKTsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdjbW9uZXknKTsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdoYXNfcGF5X3B3ZCcpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBlcnJvci5tZXNzYWdlID0gJ+acjeWKoeWZqOmUmeivryg1MDApJzsKICAgICAgICB9CgogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSA1MDE6CiAgICAgICAgZXJyb3IubWVzc2FnZSA9ICfmnI3liqHmnKrlrp7njrAoNTAxKSc7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIDUwMjoKICAgICAgICBlcnJvci5tZXNzYWdlID0gJ+e9kee7nOmUmeivryg1MDIpJzsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgNTAzOgogICAgICAgIGVycm9yLm1lc3NhZ2UgPSAn5pyN5Yqh5LiN5Y+v55SoKDUwMyknOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSA1MDQ6CiAgICAgICAgZXJyb3IubWVzc2FnZSA9ICfnvZHnu5zotoXml7YoNTA0KSc7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIDUwNToKICAgICAgICBlcnJvci5tZXNzYWdlID0gJ0hUVFDniYjmnKzkuI3lj5fmlK/mjIEoNTA1KSc7CiAgICAgICAgYnJlYWs7CgogICAgICBkZWZhdWx0OiAvLyBlcnJvci5tZXNzYWdlID0gYOi/nuaOpeWHuumUmSgke2Vycm9yLnJlc3BvbnNlLnN0YXR1c30p77yBYCAgICAgICAgICAgIAoKICAgIH0KCiAgICBpZiAoZXJyb3IucmVzcG9uc2Uuc3RhdHVzID09IDQwMSkgewogICAgICBpZiAod2luZG93LmkgPT0gMCkgewogICAgICAgIGlmIChlcnJvci5tZXNzYWdlICE9ICcnKSB7CiAgICAgICAgICBfTWVzc2FnZS5lcnJvcih7CiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsCiAgICAgICAgICAgIHBvc2l0aW9uOiAnbWlkZGxlJywKICAgICAgICAgICAgZHVyYXRpb246IDIwMDAKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQoKICAgICAgd2luZG93LmkrKzsKICAgIH0gZWxzZSB7CiAgICAgIHdpbmRvdy5pID0gMDsKCiAgICAgIGlmIChlcnJvci5yZXNwb25zZS5zdGF0dXMgIT0gNDEyKSB7CiAgICAgICAgaWYgKGVycm9yLm1lc3NhZ2UgIT0gJycpIHsKICAgICAgICAgIF9NZXNzYWdlLmVycm9yKHsKICAgICAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSwKICAgICAgICAgICAgcG9zaXRpb246ICdtaWRkbGUnLAogICAgICAgICAgICBkdXJhdGlvbjogMjAwMAogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yLnJlc3BvbnNlLmRhdGEpOwogIH0KfSk7CmV4cG9ydCBkZWZhdWx0IFNlcnZpY2U7"},{"version":3,"sources":["E:/工作/bm_admin/src/http/axios.js"],"names":["axios","router","guid","getServerDate","Service","create","baseURL","serverTimestamp","localTimestamp","Date","getTime","interceptors","request","use","config","localStorage","getItem","headers","Authorization","timestamp","Math","ceil","nonce","signature","aes","url","error","message","Promise","reject","window","i","response","res","status","push","removeItem","responseCode","data","position","duration"],"mappings":"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","sourcesContent":["import axios from 'axios'\r\nimport { Message } from 'element-ui'\r\nimport router from '@/router'\r\nimport {guid,getServerDate} from './utils.js'\r\n\r\n// axios.defaults.timeout = 10000 // 请求超时时间\r\n\r\nconst Service = axios.create({\r\n    baseURL: '/',\r\n})\r\n\r\n// axios 请求拦截器\r\nconst serverTimestamp = getServerDate();\r\nconst localTimestamp = new Date().getTime();\r\nService.interceptors.request.use(\r\n    config=>{\r\n        if(localStorage.getItem(\"access_token\")){\r\n\t\t\tconfig.headers.Authorization = 'Bearer' + '  ' + localStorage.getItem('access_token');\r\n        }\r\n        const timestamp = Math.ceil((new Date().getTime() - localTimestamp + serverTimestamp) / 1000) \r\n\t\tconst nonce = guid()\r\n\t\tconst signature = aes(timestamp,serverTimestamp,localTimestamp,nonce,config.url);\r\n\t\tconfig.headers['Timestamp'] = timestamp;\r\n\t\tconfig.headers['Nonce'] = nonce;\r\n        config.headers['Signature'] = signature;\r\n        return config\r\n    },error=>{\r\n        Message.error({ message: '请求超时!' });\r\n        return Promise.reject(error)\r\n    }\r\n)\r\n\r\n// axios respone拦截器\r\nwindow.i = 0\r\nService.interceptors.response.use(\r\n    res=>{\r\n        window.i = 0;\r\n        if(res.status == 200){\r\n            return res;\r\n        }else if (res.status == 401){\r\n            router.push('/login');\r\n            localStorage.removeItem('access_token');\r\n            localStorage.removeItem('expires_time');\r\n            localStorage.removeItem('mobile');\r\n            localStorage.removeItem('agentLink');\r\n            localStorage.removeItem('withdrawMoney');\r\n            localStorage.removeItem('selectedBgImg');\r\n            localStorage.removeItem('money');\r\n            localStorage.removeItem('generateBankCardData');\r\n            localStorage.removeItem('cmoney');\r\n            localStorage.removeItem('has_pay_pwd');\r\n            return res;\r\n        }else if (res.status == 201) {\r\n            return res;\r\n        }\r\n        return res;\r\n    },\r\n    error=>{\r\n        if (error && error.response) {\r\n            const responseCode = error.response.status;\r\n            switch (responseCode) {\r\n            case 400:\r\n                error.message = '请求错误(400)'\r\n                break\r\n            case 401:\r\n                error.message = error.response.data.message;\r\n                router.push('/login');\r\n                localStorage.removeItem('access_token');\r\n                localStorage.removeItem('expires_time');\r\n                localStorage.removeItem('mobile');\r\n                localStorage.removeItem('agentLink');\r\n                localStorage.removeItem('withdrawMoney');\r\n                localStorage.removeItem('selectedBgImg');\r\n                localStorage.removeItem('money');\r\n                localStorage.removeItem('generateBankCardData');\r\n                localStorage.removeItem('cmoney');\r\n                localStorage.removeItem('has_pay_pwd');\r\n                break\r\n            case 403:\r\n                error.message = '拒绝访问(403)'\r\n                break\r\n            case 404:\r\n                error.message = '请求出错(404)'\r\n                break\r\n            case 408:\r\n                error.message = '请求超时(408)'\r\n                break\r\n            case 500:\r\n                if(error.response.data.message == 'Unauthenticated.'){\r\n                    error.message = '';\r\n                    router.push('/login');\r\n                    localStorage.removeItem('access_token');\r\n                    localStorage.removeItem('expires_time');\r\n                    localStorage.removeItem('mobile');\r\n                    localStorage.removeItem('agentLink');\r\n                    localStorage.removeItem('withdrawMoney');\r\n                    localStorage.removeItem('selectedBgImg');\r\n                    localStorage.removeItem('money');\r\n                    localStorage.removeItem('generateBankCardData');\r\n                    localStorage.removeItem('cmoney');\r\n                    localStorage.removeItem('has_pay_pwd');\r\n                }else{\r\n                    error.message = '服务器错误(500)'\r\n                }\r\n                break\r\n            case 501:\r\n                error.message = '服务未实现(501)'\r\n                break\r\n            case 502:\r\n                error.message = '网络错误(502)'\r\n                break\r\n            case 503:\r\n                error.message = '服务不可用(503)'\r\n                break\r\n            case 504:\r\n                error.message = '网络超时(504)'\r\n                break\r\n            case 505:\r\n                error.message = 'HTTP版本不受支持(505)'\r\n                break\r\n            default:\r\n                // error.message = `连接出错(${error.response.status})！`            \r\n            }\r\n            if(error.response.status == 401){\r\n                if(window.i == 0){\r\n                    if(error.message != ''){\r\n                        Message.error({\r\n                            message: error.message,\r\n                            position: 'middle',\r\n                            duration: 2000\r\n                        })\r\n                    }\r\n                }\r\n                window.i++\r\n            }else{\r\n                window.i = 0;\r\n                if(error.response.status != 412){\r\n                    if(error.message != ''){\r\n                        Message.error({\r\n                            message: error.message,\r\n                            position: 'middle',\r\n                            duration: 2000\r\n                        })\r\n                    }\r\n                }\r\n            }\r\n            return Promise.reject(error.response.data)\r\n        }\r\n    }\r\n)\r\n\r\nexport default Service;"]}]}